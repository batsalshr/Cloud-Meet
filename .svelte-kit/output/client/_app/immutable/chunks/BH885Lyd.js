import"./DsnmJJEf.js";import{p as Ze,k as y,m as ne,d as i,l as o,s as r,h as e,t as B,a as s,b as Ye,g as a,r as t,n as He,aj as it,c as Se,f as fe,j as ot,u as $e,aZ as at}from"./DQ3BFWhX.js";import{d as Je,s as f}from"./CySGt9vl.js";import{i as g}from"./u6AVuwMs.js";import{e as Ie,i as Ue}from"./DKg4GSHA.js";import{r as We,s as Xe,b as nt}from"./BI5nyQHI.js";import{s as Be}from"./R6z4UYL7.js";import{s as rt}from"./BXbUNSRB.js";import{b as Ge}from"./C1Rppsd0.js";import{o as dt}from"./CdhubeB1.js";import{b as et}from"./dm5yZCSw.js";import{c as tt}from"./BjWePiXU.js";var vt=i('<div class="bg-red-50 border border-red-200 text-red-800 rounded-lg p-3 text-sm"> </div>'),ct=i('<div class="bg-green-50 border border-green-200 text-green-800 rounded-lg p-3 text-sm"> </div>'),ut=i('<img alt="Profile" class="w-24 h-24 rounded-full object-cover"/>'),gt=i('<div class="w-24 h-24 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold text-3xl"> </div>'),ft=i('<div class="w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"></div>'),bt=it('<svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>'),mt=i('<button type="button"></button>'),_t=i('<div class="space-y-4"><!> <!> <div class="flex items-start gap-6"><div class="flex-shrink-0"><div class="relative"><!> <label class="absolute bottom-0 right-0 bg-white rounded-full p-2 shadow-lg border border-gray-200 cursor-pointer hover:bg-gray-50 transition"><input type="file" accept="image/*" class="hidden"/> <!></label></div> <p class="text-xs text-gray-500 mt-2 text-center">Max 2MB</p></div> <div class="flex-1 space-y-4"><div><label for="profile-name" class="block text-sm font-medium text-gray-700 mb-2">Display Name</label> <input type="text" id="profile-name" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Your name"/> <p class="text-xs text-gray-500 mt-1">This name will be shown on your booking page</p></div> <div><label for="contact-email" class="block text-sm font-medium text-gray-700 mb-2">Contact Email</label> <input type="email" id="contact-email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="your@business-email.com"/> <p class="text-xs text-gray-500 mt-1"> </p></div></div></div> <div class="mt-6"><label class="block text-sm font-medium text-gray-700 mb-3">Brand Color</label> <div class="flex items-center gap-4"><div class="flex flex-wrap gap-2"></div> <div class="flex items-center gap-2"><label class="relative cursor-pointer"><input type="color" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"/> <div class="w-8 h-8 rounded-full border-2 border-dashed border-gray-300 flex items-center justify-center hover:border-gray-400 transition"><svg class="w-4 h-4 text-white drop-shadow" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></div></label> <span class="text-sm text-gray-500 font-mono"> </span></div></div> <p class="text-xs text-gray-500 mt-2">This color will be used on your booking page for buttons and accents</p></div> <div class="mt-6"><label class="block text-sm font-medium text-gray-700 mb-3">Time Format</label> <div class="flex gap-3"><button type="button">12-hour (AM/PM)</button> <button type="button">24-hour</button></div> <p class="text-xs text-gray-500 mt-2">Choose how times are displayed on your booking page</p></div> <div class="flex justify-end mt-6"><button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50"> </button></div></div>'),pt=i('<img alt="Profile" class="w-16 h-16 rounded-full object-cover"/>'),xt=i('<div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold text-2xl"> </div>'),ht=i('<div class="flex items-center gap-4"><!> <div><p class="font-semibold text-gray-900"> </p> <p class="text-sm text-gray-600"> </p></div></div>'),yt=i('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8"><div class="flex items-center justify-between mb-4"><h2 class="text-lg font-semibold text-gray-900">Your Profile</h2> <button class="text-sm text-blue-600 hover:text-blue-700"> </button></div> <!></div>');function pa(be,l){Ze(l,!0);function R(){try{return l.user?.settings?JSON.parse(l.user.settings):{}}catch{return{}}}let h=y(!1),V=y(ne(l.user?.name||"")),U=y(ne(l.user?.profile_image||"")),S=y(ne(l.user?.brand_color||"#3b82f6")),k=y(ne(l.user?.contact_email||"")),D=y(ne(R().timeFormat||"12h")),W=y(!1),G=y(!1),z=y(""),J=y("");const de=["#3b82f6","#8b5cf6","#ec4899","#ef4444","#f97316","#eab308","#22c55e","#14b8a6","#06b6d4","#6366f1","#000000","#6b7280"];async function ve(j){const b=j.target.files?.[0];if(b){o(G,!0),o(z,"");try{const F=new FormData;F.append("image",b);const L=await fetch("/api/profile",{method:"POST",body:F});if(!L.ok){const m=await L.json();throw new Error(m.message||"Failed to upload image")}const Z=await L.json();o(U,Z.imageUrl||"",!0),o(J,"Image uploaded successfully"),setTimeout(()=>o(J,""),3e3)}catch(F){o(z,F.message||"Failed to upload image",!0)}finally{o(G,!1)}}}async function P(){o(W,!0),o(z,""),o(J,"");try{const j=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e(V),profileImage:e(U),brandColor:e(S),contactEmail:e(k),timeFormat:e(D)})});if(!j.ok){const v=await j.json();throw new Error(v.message||"Failed to save profile")}o(J,"Profile saved successfully"),o(h,!1),l.onProfileSaved?.()}catch(j){o(z,j.message||"Failed to save profile",!0)}finally{o(W,!1)}}var K=yt(),Q=a(K),ee=r(a(Q),2);ee.__click=()=>o(h,!e(h));var A=a(ee,!0);t(ee),t(Q);var ae=r(Q,2);{var X=j=>{var v=_t(),b=a(v);{var F=c=>{var M=vt(),d=a(M,!0);t(M),B(()=>f(d,e(z))),s(c,M)};g(b,c=>{e(z)&&c(F)})}var L=r(b,2);{var Z=c=>{var M=ct(),d=a(M,!0);t(M),B(()=>f(d,e(J))),s(c,M)};g(L,c=>{e(J)&&c(Z)})}var m=r(L,2),H=a(m),q=a(H),E=a(q);{var O=c=>{var M=ut();B(()=>Xe(M,"src",e(U))),s(c,M)},I=c=>{var M=gt(),d=a(M,!0);t(M),B(C=>f(d,C),[()=>e(V)?.charAt(0)||"U"]),s(c,M)};g(E,c=>{e(U)?c(O):c(I,!1)})}var te=r(E,2),le=a(te);le.__change=ve;var me=r(le,2);{var he=c=>{var M=ft();s(c,M)},n=c=>{var M=bt();s(c,M)};g(me,c=>{e(G)?c(he):c(n,!1)})}t(te),t(q),He(2),t(H);var u=r(H,2),p=a(u),T=r(a(p),2);We(T),He(2),t(p);var N=r(p,2),w=r(a(N),2);We(w);var Y=r(w,2),_e=a(Y);t(Y),t(N),t(u),t(m);var re=r(m,2),ce=r(a(re),2),pe=a(ce);Ie(pe,21,()=>de,Ue,(c,M)=>{var d=mt();d.__click=()=>o(S,e(M),!0),B(()=>{Be(d,1,`w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 ${e(S)===e(M)?"ring-2 ring-offset-2 ring-gray-400":"border-gray-200"}`),rt(d,`background-color: ${e(M)??""}`),Xe(d,"title",e(M))}),s(c,d)}),t(pe);var ye=r(pe,2),we=a(ye),ie=a(we);We(ie);var De=r(ie,2);t(we);var je=r(we,2),Ve=a(je,!0);t(je),t(ye),t(ce),He(2),t(re);var Le=r(re,2),Pe=r(a(Le),2),ue=a(Pe);ue.__click=()=>o(D,"12h");var Te=r(ue,2);Te.__click=()=>o(D,"24h"),t(Pe),He(2),t(Le);var _=r(Le,2),x=a(_);x.__click=P;var Fe=a(x,!0);t(x),t(_),t(v),B(()=>{le.disabled=e(G),f(_e,`Business email shown in booking emails. Leave empty to use ${l.user?.email??""}`),rt(De,`background-color: ${e(S)??""}`),f(Ve,e(S)),Be(ue,1,`px-4 py-2 rounded-lg border-2 text-sm font-medium transition ${e(D)==="12h"?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-300 text-gray-600 hover:border-gray-400"}`),Be(Te,1,`px-4 py-2 rounded-lg border-2 text-sm font-medium transition ${e(D)==="24h"?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-300 text-gray-600 hover:border-gray-400"}`),x.disabled=e(W),f(Fe,e(W)?"Saving...":"Save Profile")}),Ge(T,()=>e(V),c=>o(V,c)),Ge(w,()=>e(k),c=>o(k,c)),Ge(ie,()=>e(S),c=>o(S,c)),s(j,v)},oe=j=>{var v=ht(),b=a(v);{var F=O=>{var I=pt();B(()=>Xe(I,"src",l.user.profile_image)),s(O,I)},L=O=>{var I=xt(),te=a(I,!0);t(I),B(le=>f(te,le),[()=>l.user?.name?.charAt(0)||"U"]),s(O,I)};g(b,O=>{l.user?.profile_image?O(F):O(L,!1)})}var Z=r(b,2),m=a(Z),H=a(m,!0);t(m);var q=r(m,2),E=a(q,!0);t(q),t(Z),t(v),B(()=>{f(H,l.user?.name),f(E,l.user?.email)}),s(j,v)};g(ae,j=>{e(h)?j(X):j(oe,!1)})}t(K),B(()=>f(A,e(h)?"Cancel":"Edit Profile")),s(be,K),Ye()}Je(["click","change"]);var wt=i('<div class="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm"> </div>'),Ct=i('<span class="text-green-600">Connected</span> <span class="text-gray-500">(via login)</span>',1),kt=i('<span class="text-gray-500">Not connected</span>'),Mt=i('<span class="text-gray-500">Not configured</span>'),St=i('<span class="text-green-600">Connected</span>'),Dt=i('<span class="text-gray-500">Not connected</span>'),jt=i('<button class="px-3 py-1.5 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition">Disconnect</button>'),Lt=i('<a href="/auth/outlook" class="px-3 py-1.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition">Connect</a>'),Tt=i("<option>Google Calendar only</option>"),Pt=i("<option>Outlook Calendar only</option>"),Ft=i("<option>Both calendars</option>"),Ht=i('<p class="text-sm text-gray-500">Loading calendars...</p>'),Bt=i('<p class="text-sm text-gray-500">No calendars found</p>'),Vt=i('<span class="text-xs text-gray-500">(Primary)</span>'),zt=i('<label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"/> <span class="text-sm text-gray-700"> <!></span></label>'),At=i('<div class="space-y-2 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-3"></div> <p class="text-xs text-gray-500 mt-1"> </p>',1),Ot=i('<div><label class="block text-sm font-medium text-gray-700 mb-2">Google calendars to check</label> <!></div>'),Nt=i("<option>Google Calendar (Google Meet)</option>"),Et=i("<option>Outlook Calendar (Microsoft Teams)</option>"),Gt=i('<div class="mt-6 pt-6 border-t border-gray-200"><h4 class="font-medium text-gray-900 mb-1">Default Calendar Settings</h4> <p class="text-sm text-gray-600 mb-4">These settings apply to all event types unless overridden.</p> <div class="space-y-4"><div><label for="availabilityCalendars" class="block text-sm font-medium text-gray-700 mb-1">Check availability from</label> <select id="availabilityCalendars" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><!><!><!></select></div> <!> <div><label for="inviteCalendar" class="block text-sm font-medium text-gray-700 mb-1">Send calendar invite via</label> <select id="inviteCalendar" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><!><!></select></div> <button class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition"> </button></div></div>'),It=i('<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><h3 class="text-lg font-semibold text-gray-900 mb-2">Calendar Integrations</h3> <p class="text-sm text-gray-600 mb-4">Connect your calendars to check availability and send invites.</p> <!> <div class="space-y-4"><div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg"><div class="flex items-center gap-3"><div class="w-10 h-10 flex items-center justify-center bg-white rounded-lg shadow-sm"><svg class="w-6 h-6" viewBox="0 0 512 512" fill="none"><path d="M390.736 121.264H121.264V390.736H390.736V121.264Z" fill="white"></path><path d="M390.736 512L512 390.736L451.368 380.392L390.736 390.736L379.67 446.196L390.736 512Z" fill="#EA4335"></path><path d="M0 390.736V471.578C0 493.912 18.088 512 40.42 512H121.264L133.714 451.368L121.264 390.736L55.198 380.392L0 390.736Z" fill="#188038"></path><path d="M512 121.264V40.42C512 18.088 493.912 0 471.58 0H390.736C383.36 30.072 379.671 52.2027 379.67 66.392C379.67 80.58 383.359 98.8707 390.736 121.264C417.556 128.944 437.767 132.784 451.368 132.784C464.969 132.784 485.18 128.945 512 121.264Z" fill="#1967D2"></path><path d="M512 121.264H390.736V390.736H512V121.264Z" fill="#FBBC04"></path><path d="M390.736 390.736H121.264V512H390.736V390.736Z" fill="#34A853"></path><path d="M390.736 0H40.422C18.088 0 0 18.088 0 40.42V390.736H121.264V121.264H390.736V0Z" fill="#4285F4"></path><path d="M176.54 330.308C166.468 323.504 159.494 313.568 155.688 300.428L179.066 290.796C181.186 298.88 184.891 305.145 190.182 309.592C195.436 314.038 201.836 316.228 209.314 316.228C216.959 316.228 223.527 313.903 229.018 309.254C234.51 304.606 237.272 298.678 237.272 291.504C237.272 284.16 234.375 278.164 228.582 273.516C222.788 268.868 215.512 266.544 206.822 266.544H193.314V243.404H205.44C212.917 243.404 219.216 241.382 224.336 237.338C229.456 233.298 232.016 227.772 232.016 220.732C232.016 214.468 229.726 209.482 225.146 205.744C220.566 202.004 214.77 200.118 207.73 200.118C200.858 200.118 195.402 201.938 191.36 205.608C187.319 209.289 184.282 213.937 182.534 219.116L159.394 209.482C162.458 200.792 168.084 193.112 176.336 186.476C184.588 179.84 195.132 176.506 207.932 176.506C217.398 176.506 225.92 178.326 233.466 181.996C241.01 185.668 246.938 190.754 251.216 197.222C255.496 203.722 257.616 210.998 257.616 219.082C257.616 227.334 255.63 234.308 251.656 240.034C247.682 245.76 242.796 250.138 237.002 253.204V254.584C244.483 257.669 250.982 262.735 255.798 269.238C260.682 275.806 263.142 283.654 263.142 292.818C263.142 301.978 260.816 310.164 256.168 317.338C251.52 324.514 245.088 330.172 236.934 334.282C228.75 338.392 219.554 340.482 209.348 340.482C197.524 340.514 186.612 337.112 176.54 330.308ZM320.132 214.298L294.466 232.858L281.632 213.39L327.678 180.176H345.328V336.842H320.132V214.298Z" fill="#4285F4"></path></svg></div> <div><h4 class="font-medium text-gray-900">Google Calendar</h4> <p class="text-sm text-gray-600"><!></p></div></div></div> <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg"><div class="flex items-center gap-3"><div class="w-10 h-10 flex items-center justify-center bg-white rounded-lg shadow-sm"><svg class="w-6 h-6" viewBox="0 0 48 48"><path fill="#40c4ff" d="M31.323,8.502L7.075,23.872l-2.085-3.29v-2.835c0-1.032,0.523-1.994,1.389-2.556l14.095-9.146c2.147-1.393,4.914-1.394,7.061-0.001L31.323,8.502z"></path><path fill="#1976d2" d="M27.317,5.911c0.073,0.043,0.145,0.088,0.217,0.135l11,7.136L11.259,30.47l-4.185-6.603l20.017-12.713C28.988,9.95,29.071,7.241,27.317,5.911z"></path><path fill="#0d47a1" d="M22.142,33.771L11.26,30.47l23.136-14.666c1.949-1.235,1.944-4.08-0.009-5.308l-0.104-0.065l0.3,0.186l7.041,4.568c0.866,0.562,1.389,1.524,1.389,2.556v2.744L22.142,33.771z"></path><path fill="#29b6f6" d="M20.886,43h15.523c3.646,0,6.602-2.956,6.602-6.602V17.797c0,1.077-0.554,2.079-1.466,2.652l-23.09,14.498c-1.246,0.782-2.001,2.15-2.001,3.62C16.454,41.016,18.438,43,20.886,43z"></path><path fill="#80d8ff" d="M27.198,42.999H11.589c-3.646,0-6.602-2.956-6.602-6.602V17.783c0,1.076,0.552,2.076,1.461,2.649l23.067,14.543c1.263,0.796,2.029,2.185,2.029,3.678C31.544,41.053,29.598,42.999,27.198,42.999z"></path><path fill="#1565c0" d="M6.453,23h10.094C18.454,23,20,24.546,20,26.453v10.094C20,38.454,18.454,40,16.547,40H6.453C4.546,40,3,38.454,3,36.547V26.453C3,24.546,4.546,23,6.453,23z"></path><path fill="#fff" d="M11.453,36.518c-1.4,0-2.55-0.452-3.449-1.355c-0.899-0.903-1.348-2.082-1.348-3.537c0-1.536,0.456-2.778,1.369-3.726c0.913-0.949,2.107-1.423,3.584-1.423c1.396,0,2.532,0.454,3.408,1.362c0.881,0.908,1.321,2.105,1.321,3.591c0,1.527-0.456,2.758-1.369,3.692C14.061,36.053,12.889,36.518,11.453,36.518z M11.493,34.601c0.763,0,1.378-0.269,1.843-0.806c0.465-0.538,0.698-1.285,0.698-2.243c0-0.998-0.226-1.775-0.677-2.331c-0.452-0.556-1.055-0.833-1.809-0.833c-0.777,0-1.403,0.287-1.877,0.861c-0.474,0.569-0.711,1.323-0.711,2.263c0,0.953,0.237,1.707,0.711,2.263C10.145,34.326,10.752,34.601,11.493,34.601z"></path></svg></div> <div><h4 class="font-medium text-gray-900">Outlook Calendar</h4> <p class="text-sm"><!></p></div></div> <!></div></div> <!></div>');function xa(be,l){Ze(l,!0);let R=y(""),h=y(!1),V=y(!1),U=y(ne([])),S=y(ne(new Set(l.user?.selectedGoogleCalendars||[])));const k=l.user?.googleConnected??!1,D=(l.user?.outlookConnected??!1)&&l.outlookConfigured;function W(){return l.user?.defaultAvailabilityCalendars?l.user.defaultAvailabilityCalendars:k&&D?"both":D?"outlook":"google"}function G(){return l.user?.defaultInviteCalendar?l.user.defaultInviteCalendar:k?"google":D?"outlook":"google"}let z=y(ne(W())),J=y(ne(G()));dt(async()=>{k&&await de()});async function de(){o(V,!0);try{const n=await fetch("/api/calendars/google");if(n.ok){const u=await n.json();o(U,u.calendars,!0),e(S).size===0&&e(U).length>0&&o(S,new Set(e(U).map(p=>p.id)),!0)}}catch(n){console.error("Failed to load Google calendars:",n)}finally{o(V,!1)}}function ve(n){const u=new Set(e(S));u.has(n)?u.delete(n):u.add(n),o(S,u,!0)}async function P(){o(h,!0),o(R,"");try{if(!(await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({defaultAvailabilityCalendars:e(z),defaultInviteCalendar:e(J),selectedGoogleCalendars:Array.from(e(S))})})).ok)throw new Error("Failed to save")}catch{o(R,"Failed to save calendar settings")}finally{o(h,!1)}}async function K(){if(confirm("Are you sure you want to disconnect your Outlook calendar?"))try{const n=document.createElement("form");n.method="POST",n.action="/auth/outlook/disconnect",document.body.appendChild(n),n.submit()}catch{o(R,"Failed to disconnect Outlook")}}var Q=It(),ee=r(a(Q),4);{var A=n=>{var u=wt(),p=a(u,!0);t(u),B(()=>f(p,e(R))),s(n,u)};g(ee,n=>{e(R)&&n(A)})}var ae=r(ee,2),X=a(ae),oe=a(X),j=r(a(oe),2),v=r(a(j),2),b=a(v);{var F=n=>{var u=Ct();He(2),s(n,u)},L=n=>{var u=kt();s(n,u)};g(b,n=>{l.user?.googleConnected?n(F):n(L,!1)})}t(v),t(j),t(oe),t(X);var Z=r(X,2),m=a(Z),H=r(a(m),2),q=r(a(H),2),E=a(q);{var O=n=>{var u=Mt();s(n,u)},I=n=>{var u=Se(),p=fe(u);{var T=w=>{var Y=St();s(w,Y)},N=w=>{var Y=Dt();s(w,Y)};g(p,w=>{l.user?.outlookConnected?w(T):w(N,!1)},!0)}s(n,u)};g(E,n=>{l.outlookConfigured?n(I,!1):n(O)})}t(q),t(H),t(m);var te=r(m,2);{var le=n=>{var u=Se(),p=fe(u);{var T=w=>{var Y=jt();Y.__click=K,s(w,Y)},N=w=>{var Y=Lt();s(w,Y)};g(p,w=>{l.user?.outlookConnected?w(T):w(N,!1)})}s(n,u)};g(te,n=>{l.outlookConfigured&&n(le)})}t(Z),t(ae);var me=r(ae,2);{var he=n=>{var u=Gt(),p=r(a(u),4),T=a(p),N=r(a(T),2),w=a(N);{var Y=_=>{var x=Tt();x.value=x.__value="google",s(_,x)};g(w,_=>{k&&_(Y)})}var _e=r(w);{var re=_=>{var x=Pt();x.value=x.__value="outlook",s(_,x)};g(_e,_=>{D&&_(re)})}var ce=r(_e);{var pe=_=>{var x=Ft();x.value=x.__value="both",s(_,x)};g(ce,_=>{k&&D&&_(pe)})}t(N),t(T);var ye=r(T,2);{var we=_=>{var x=Ot(),Fe=r(a(x),2);{var c=d=>{var C=Ht();s(d,C)},M=d=>{var C=Se(),se=fe(C);{var ze=$=>{var xe=Bt();s($,xe)},Ae=$=>{var xe=At(),Oe=fe(xe);Ie(Oe,21,()=>e(U),Ue,(Ce,ge)=>{var Ne=zt(),ke=a(Ne);We(ke),ke.__change=()=>ve(e(ge).id);var Me=r(ke,2),Re=a(Me),Qe=r(Re);{var st=Ee=>{var lt=Vt();s(Ee,lt)};g(Qe,Ee=>{e(ge).primary&&Ee(st)})}t(Me),t(Ne),B(Ee=>{nt(ke,Ee),f(Re,`${e(ge).summary??""} `)},[()=>e(S).has(e(ge).id)]),s(Ce,Ne)}),t(Oe);var Ke=r(Oe,2),qe=a(Ke);t(Ke),B(()=>f(qe,`Selected: ${e(S).size??""} of ${e(U).length??""}`)),s($,xe)};g(se,$=>{e(U).length===0?$(ze):$(Ae,!1)},!0)}s(d,C)};g(Fe,d=>{e(V)?d(c):d(M,!1)})}t(x),s(_,x)};g(ye,_=>{k&&(e(z)==="google"||e(z)==="both")&&_(we)})}var ie=r(ye,2),De=r(a(ie),2),je=a(De);{var Ve=_=>{var x=Nt();x.value=x.__value="google",s(_,x)};g(je,_=>{k&&_(Ve)})}var Le=r(je);{var Pe=_=>{var x=Et();x.value=x.__value="outlook",s(_,x)};g(Le,_=>{D&&_(Pe)})}t(De),t(ie);var ue=r(ie,2);ue.__click=P;var Te=a(ue,!0);t(ue),t(p),t(u),B(()=>{ue.disabled=e(h),f(Te,e(h)?"Saving...":"Save Settings")}),et(N,()=>e(z),_=>o(z,_)),et(De,()=>e(J),_=>o(J,_)),s(n,u)};g(me,n=>{(k||D)&&n(he)})}t(Q),s(be,Q),Ye()}Je(["click","change"]);var Ut=i('<div class="bg-red-50 border border-red-200 text-red-800 rounded-lg p-3 text-sm mb-4"> </div>'),Zt=i(`<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-lg shadow-xl max-w-md w-full"><div class="p-6"><h3 class="text-lg font-semibold text-gray-900 mb-2">Cancel Booking</h3> <p class="text-sm text-gray-600 mb-4">Cancel <strong> </strong> with <strong> </strong> </p> <!> <div class="mb-4"><label for="cancel-message" class="block text-sm font-medium text-gray-700 mb-1">Message to attendee (optional)</label> <textarea id="cancel-message" placeholder="Let them know why you're cancelling..." rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm"></textarea> <p class="text-xs text-gray-500 mt-1">This message will be included in the cancellation email</p></div> <div class="flex justify-end gap-3"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800">Keep Booking</button> <button class="px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition disabled:opacity-50"> </button></div></div></div></div>`);function ha(be,l){Ze(l,!0);let R=y(""),h=y(""),V=y(!1);const{formatCompactDateTime:U}=tt();async function S(){if(l.booking){o(V,!0),o(h,"");try{await l.onCancel(e(R).trim()||""),o(R,""),o(h,"")}catch(z){o(h,z.message||"Failed to cancel booking",!0)}finally{o(V,!1)}}}function k(){o(R,""),o(h,""),l.onClose()}var D=Se(),W=fe(D);{var G=z=>{var J=Zt(),de=a(J),ve=a(de),P=r(a(ve),2),K=r(a(P)),Q=a(K,!0);t(K);var ee=r(K,2),A=a(ee,!0);t(ee);var ae=r(ee);t(P);var X=r(P,2);{var oe=m=>{var H=Ut(),q=a(H,!0);t(H),B(()=>f(q,e(h))),s(m,H)};g(X,m=>{e(h)&&m(oe)})}var j=r(X,2),v=r(a(j),2);ot(v),He(2),t(j);var b=r(j,2),F=a(b);F.__click=k;var L=r(F,2);L.__click=S;var Z=a(L,!0);t(L),t(b),t(ve),t(de),t(J),B(m=>{f(Q,l.booking.event_type_name),f(A,l.booking.attendee_name),f(ae,` on ${m??""}?`),L.disabled=e(V),f(Z,e(V)?"Cancelling...":"Cancel Booking")},[()=>U(new Date(l.booking.start_time))]),Ge(v,()=>e(R),m=>o(R,m)),s(z,J)};g(W,z=>{l.show&&l.booking&&z(G)})}s(be,D),Ye()}Je(["click"]);var Yt=i('<div class="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm"> </div>'),Jt=i('<button type="button"> </button>'),Kt=i('<div class="text-center py-8 text-gray-500">Loading...</div>'),Rt=i('<div class="text-center py-8 text-gray-500">No available times</div>'),Wt=i('<button type="button"> </button>'),qt=i('<div class="grid grid-cols-2 gap-2 max-h-64 overflow-y-auto"></div>'),Qt=i('<div class="text-center py-8 text-gray-400"><svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <p class="text-sm">Pick a date to see times</p></div>'),Xt=i('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"><div class="p-6 border-b border-gray-200"><div class="flex justify-between items-start"><div><h2 class="text-xl font-semibold text-gray-900">Propose New Time</h2> <p class="text-sm text-gray-600 mt-1"> </p></div> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="mt-3 bg-gray-50 rounded-lg p-3"><p class="text-sm"><span class="text-gray-600">Meeting:</span> <span class="font-medium"> </span></p> <p class="text-sm"><span class="text-gray-600">With:</span> <span class="font-medium"> </span></p></div></div> <div class="p-6"><!> <div class="flex gap-6"><div class="flex-1"><div class="flex items-center justify-between mb-4"><button class="p-1 hover:bg-gray-100 rounded"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <span class="font-medium"> </span> <button class="p-1 hover:bg-gray-100 rounded"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div> <div class="grid grid-cols-7 gap-1 text-center text-xs text-gray-500 mb-2"><div>Su</div><div>Mo</div><div>Tu</div><div>We</div><div>Th</div><div>Fr</div><div>Sa</div></div> <div class="grid grid-cols-7 gap-1"></div></div> <div class="flex-1"><h3 class="font-medium text-gray-900 mb-3"><!></h3> <!></div></div> <div class="mt-6"><label for="message" class="block text-sm font-medium text-gray-700 mb-2">Message to attendee (optional)</label> <textarea id="message" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" placeholder="Let them know why you need to reschedule..."></textarea></div></div> <div class="p-6 border-t border-gray-200 flex gap-3 justify-end"><button type="button" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition">Cancel</button> <button type="button" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed"> </button></div></div></div>');function ya(be,l){Ze(l,!0);const{formatCompactDateTime:R}=tt();let h=y(null),V=y(null),U=y(""),S=y(!1),k=y(null),D=y(ne([])),W=y(!1),G=y(ne(new Date));const z=$e(()=>e(G).toLocaleString("default",{month:"long",year:"numeric"})),J=$e(()=>()=>{const v=e(G).getFullYear(),b=e(G).getMonth(),F=new Date(v,b,1),L=new Date(v,b+1,0),Z=F.getDay(),m=[];for(let E=Z-1;E>=0;E--){const O=new Date(v,b,-E);m.push({date:O,isCurrentMonth:!1,isToday:!1,isPast:!0})}const H=new Date;H.setHours(0,0,0,0);for(let E=1;E<=L.getDate();E++){const O=new Date(v,b,E),I=O.toDateString()===H.toDateString(),te=O<H;m.push({date:O,isCurrentMonth:!0,isToday:I,isPast:te})}const q=42-m.length;for(let E=1;E<=q;E++){const O=new Date(v,b+1,E);m.push({date:O,isCurrentMonth:!1,isToday:!1,isPast:!1})}return m});function de(){o(G,new Date(e(G).getFullYear(),e(G).getMonth()-1,1),!0)}function ve(){o(G,new Date(e(G).getFullYear(),e(G).getMonth()+1,1),!0)}function P(v){return v.toISOString().split("T")[0]}async function K(v){const b=P(v);o(h,b,!0),o(V,null),o(D,[],!0),o(W,!0),o(k,null);try{const F=await fetch(`/api/availability?date=${b}&event=${l.booking?.event_type_slug}`);if(F.ok){const L=await F.json();o(D,L.slots||[],!0)}else o(k,"Failed to load available times")}catch{o(k,"Failed to load available times")}finally{o(W,!1)}}function Q(v){o(V,v.start,!0)}function ee(v){return new Date(v).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}async function A(){if(!(!l.booking||!e(h)||!e(V))){o(S,!0),o(k,null);try{const v=e(D).find(b=>b.start===e(V));if(!v){o(k,"Please select a time slot");return}await l.onSubmit(l.booking.id,v.start,v.end,e(U)),l.onClose()}catch(v){o(k,v.message||"Failed to send reschedule proposal",!0)}finally{o(S,!1)}}}function ae(v){v.target===v.currentTarget&&l.onClose()}var X=Se(),oe=fe(X);{var j=v=>{var b=Xt();b.__click=ae;var F=a(b),L=a(F),Z=a(L),m=a(Z),H=r(a(m),2),q=a(H);t(H),t(m);var E=r(m,2);E.__click=function(...d){l.onClose?.apply(this,d)},t(Z);var O=r(Z,2),I=a(O),te=r(a(I),2),le=a(te,!0);t(te),t(I);var me=r(I,2),he=r(a(me),2),n=a(he,!0);t(he),t(me),t(O),t(L);var u=r(L,2),p=a(u);{var T=d=>{var C=Yt(),se=a(C,!0);t(C),B(()=>f(se,e(k))),s(d,C)};g(p,d=>{e(k)&&d(T)})}var N=r(p,2),w=a(N),Y=a(w),_e=a(Y);_e.__click=de;var re=r(_e,2),ce=a(re,!0);t(re);var pe=r(re,2);pe.__click=ve,t(Y);var ye=r(Y,4);Ie(ye,21,()=>e(J)(),Ue,(d,C)=>{var se=Jt();se.__click=()=>K(e(C).date);var ze=a(se,!0);t(se),B((Ae,$)=>{se.disabled=e(C).isPast||!e(C).isCurrentMonth,Be(se,1,`aspect-square flex items-center justify-center text-sm rounded-lg transition
										${e(C).isCurrentMonth?"":"text-gray-300"}
										${e(C).isPast?"text-gray-300 cursor-not-allowed":"hover:bg-blue-50"}
										${e(C).isToday?"font-bold":""}
										${Ae??""}`),f(ze,$)},[()=>e(h)===P(e(C).date)?"bg-blue-600 text-white hover:bg-blue-700":"",()=>e(C).date.getDate()]),s(d,se)}),t(ye),t(w);var we=r(w,2),ie=a(we),De=a(ie);{var je=d=>{var C=at("Available times");s(d,C)},Ve=d=>{var C=at("Select a date");s(d,C)};g(De,d=>{e(h)?d(je):d(Ve,!1)})}t(ie);var Le=r(ie,2);{var Pe=d=>{var C=Kt();s(d,C)},ue=d=>{var C=Se(),se=fe(C);{var ze=$=>{var xe=Rt();s($,xe)},Ae=$=>{var xe=Se(),Oe=fe(xe);{var Ke=Ce=>{var ge=qt();Ie(ge,21,()=>e(D),Ue,(Ne,ke)=>{var Me=Wt();Me.__click=()=>Q(e(ke));var Re=a(Me,!0);t(Me),B(Qe=>{Be(Me,1,`px-3 py-2 text-sm border rounded-lg transition
											${e(V)===e(ke).start?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:border-blue-500 hover:bg-blue-50"}`),f(Re,Qe)},[()=>ee(e(ke).start)]),s(Ne,Me)}),t(ge),s(Ce,ge)},qe=Ce=>{var ge=Qt();s(Ce,ge)};g(Oe,Ce=>{e(h)?Ce(Ke):Ce(qe,!1)},!0)}s($,xe)};g(se,$=>{e(h)&&e(D).length===0?$(ze):$(Ae,!1)},!0)}s(d,C)};g(Le,d=>{e(W)?d(Pe):d(ue,!1)})}t(we),t(N);var Te=r(N,2),_=r(a(Te),2);ot(_),t(Te),t(u);var x=r(u,2),Fe=a(x);Fe.__click=function(...d){l.onClose?.apply(this,d)};var c=r(Fe,2);c.__click=A;var M=a(c,!0);t(c),t(x),t(F),t(b),B(d=>{f(q,`Current: ${d??""}`),f(le,l.booking.event_type_name),f(n,l.booking.attendee_name),f(ce,e(z)),c.disabled=!e(h)||!e(V)||e(S),f(M,e(S)?"Sending...":"Send Proposal")},[()=>R(new Date(l.booking.start_time))]),Ge(_,()=>e(U),d=>o(U,d)),s(v,b)};g(oe,v=>{l.booking&&v(j)})}s(be,X),Ye()}Je(["click"]);var $t=i('<button class="text-xs text-blue-600 hover:text-blue-700 font-medium">Reschedule</button> <button class="text-xs text-red-600 hover:text-red-700 font-medium">Cancel</button>',1),ea=i('<div class="mt-2 text-sm text-gray-600 bg-gray-50 rounded p-2"><span class="font-medium">Message:</span> </div>'),ta=i('<span class="text-red-500"> </span>'),aa=i('<div class="mt-2 text-sm text-red-600 bg-red-50 rounded p-2"><span class="font-medium"> </span> <!></div>'),ra=i('<div class="bg-white rounded-lg shadow-sm p-4 border border-gray-200"><div class="flex justify-between items-start mb-2"><div><h3 class="font-semibold text-gray-900"> </h3> <p class="text-sm text-gray-600"> </p> <p class="text-xs text-gray-500"> </p></div> <div class="flex items-center gap-2"><span> </span> <!></div></div> <div class="text-sm text-gray-700 mt-2"><p> </p></div> <!> <!></div>'),oa=i('<div class="bg-white rounded-lg shadow-sm p-8 text-center border border-gray-200"><p class="text-gray-600">No bookings yet</p></div>'),sa=i('<div><div class="flex justify-between items-center mb-4"><h2 class="text-xl font-bold text-gray-900">Upcoming Bookings</h2> <select class="text-sm border border-gray-300 rounded-md px-2 py-1 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"><option>Last booked</option><option>Upcoming first</option></select></div> <div class="space-y-4"><!></div></div>');function wa(be,l){Ze(l,!0);const{formatCompactDateTime:R}=tt();let h=y("last_booked");const V=$e(()=>()=>{if(!l.bookings)return[];const P=[...l.bookings];return e(h)==="upcoming"&&P.sort((K,Q)=>new Date(K.start_time).getTime()-new Date(Q.start_time).getTime()),P});function U(P){switch(P){case"confirmed":return"bg-green-100 text-green-800";case"canceled":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}}var S=sa(),k=a(S),D=r(a(k),2),W=a(D);W.value=W.__value="last_booked";var G=r(W);G.value=G.__value="upcoming",t(D),t(k);var z=r(k,2),J=a(z);{var de=P=>{var K=Se(),Q=fe(K);Ie(Q,17,()=>e(V)(),Ue,(ee,A)=>{var ae=ra(),X=a(ae),oe=a(X),j=a(oe),v=a(j,!0);t(j);var b=r(j,2),F=a(b,!0);t(b);var L=r(b,2),Z=a(L,!0);t(L),t(oe);var m=r(oe,2),H=a(m),q=a(H,!0);t(H);var E=r(H,2);{var O=p=>{var T=$t(),N=fe(T);N.__click=()=>l.onRescheduleClick(e(A).id);var w=r(N,2);w.__click=()=>l.onCancelClick(e(A).id),s(p,T)};g(E,p=>{e(A).status==="confirmed"&&p(O)})}t(m),t(X);var I=r(X,2),te=a(I),le=a(te,!0);t(te),t(I);var me=r(I,2);{var he=p=>{var T=ea(),N=r(a(T));t(T),B(()=>f(N,` ${e(A).attendee_notes??""}`)),s(p,T)};g(me,p=>{e(A).attendee_notes&&p(he)})}var n=r(me,2);{var u=p=>{var T=aa(),N=a(T),w=a(N);t(N);var Y=r(N,2);{var _e=re=>{var ce=ta(),pe=a(ce);t(ce),B(()=>f(pe,`: ${e(A).cancellation_reason??""}`)),s(re,ce)};g(Y,re=>{e(A).cancellation_reason&&re(_e)})}t(T),B(()=>f(w,`Cancelled by ${e(A).canceled_by==="host"?"you":"attendee"}`)),s(p,T)};g(n,p=>{e(A).status==="canceled"&&p(u)})}t(ae),B((p,T)=>{f(v,e(A).event_type_name),f(F,e(A).attendee_name),f(Z,e(A).attendee_email),Be(H,1,`px-2 py-1 text-xs rounded-full ${p??""}`),f(q,e(A).status),f(le,T)},[()=>U(e(A).status),()=>R(new Date(e(A).start_time))]),s(ee,ae)}),s(P,K)},ve=P=>{var K=oa();s(P,K)};g(J,P=>{e(V)().length>0?P(de):P(ve,!1)})}t(z),t(S),et(D,()=>e(h),P=>o(h,P)),s(be,S),Ye()}Je(["click"]);export{wa as B,xa as C,ya as H,pa as P,ha as a};
