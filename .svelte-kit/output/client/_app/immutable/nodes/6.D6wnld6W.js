import"../chunks/DsnmJJEf.js";import{p as be,k as p,m as R,d as v,l as o,g as i,h as t,s,t as W,a as m,b as ge,r,n as Z}from"../chunks/DQ3BFWhX.js";import{d as xe,s as b}from"../chunks/CySGt9vl.js";import{i as k}from"../chunks/u6AVuwMs.js";import{e as he,i as ye}from"../chunks/DKg4GSHA.js";import{a as fe,e as _e}from"../chunks/B4Bv1KaN.js";import{a as q,r as g,s as G}from"../chunks/BI5nyQHI.js";import{a as Te,b as Q}from"../chunks/C1Rppsd0.js";import{T as we}from"../chunks/-WyYYBJa.js";var ke=v('<div class="bg-green-50 border border-green-200 text-green-800 rounded-lg p-4 mb-6">✓ Availability saved successfully!</div>'),Se=v('<div class="bg-red-50 border border-red-200 text-red-800 rounded-lg p-4 mb-6"> </div>'),Ae=v('<div class="flex items-center gap-2 flex-1"><input type="time" class="px-3 py-2 border border-gray-300 rounded-md text-sm"/> <span class="text-gray-600">to</span> <input type="time" class="px-3 py-2 border border-gray-300 rounded-md text-sm"/></div>'),Ce=v('<span class="text-gray-400 text-sm">Unavailable</span>'),ze=v('<div class="flex items-center gap-4 p-4 border border-gray-200 rounded-lg"><div class="flex items-center min-w-[120px]"><input type="checkbox" class="h-4 w-4 text-blue-600 rounded border-gray-300"/> <label class="ml-2 font-medium text-gray-900"> </label></div> <!></div>'),Ee=v(`<div class="min-h-screen bg-gray-50"><header class="bg-white shadow-sm"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"><div class="flex items-center gap-4"><a href="/dashboard" class="text-gray-600 hover:text-gray-900">← Back to Dashboard</a> <h1 class="text-2xl font-bold text-gray-900">Set Availability</h1></div></div></header> <main class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!> <!> <div class="bg-white rounded-lg shadow-sm p-6 mb-6"><h2 class="text-lg font-semibold text-gray-900 mb-4">Your Timezone</h2> <p class="text-sm text-gray-600 mb-4">Set your timezone so that your availability is shown correctly to people booking meetings.</p> <div class="relative"><button type="button" class="flex items-center gap-3 px-4 py-3 border border-gray-300 rounded-lg hover:border-gray-400 transition w-full sm:w-auto"><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="text-left"><div class="font-medium text-gray-900"> </div> <div class="text-sm text-gray-500"> </div></div> <svg class="w-5 h-5 text-gray-400 ml-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div></div> <div class="bg-white rounded-lg shadow-sm p-6 mb-6"><h2 class="text-lg font-semibold text-gray-900 mb-4">Weekly Schedule</h2> <p class="text-sm text-gray-600 mb-6">Set your available hours for each day of the week. People can only book meetings during these times.</p> <form method="POST" action="?/save"><input type="hidden" name="rules"/> <input type="hidden" name="timezone"/> <div class="space-y-4"></div> <div class="mt-6 flex gap-4"><button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50"> </button> <button type="button" class="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition">Set Default Hours (Mon-Fri, 9-5)</button></div></form></div> <div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><h3 class="font-semibold text-blue-900 mb-2">Note</h3> <p class="text-sm text-blue-800">Your connected calendars will also be checked for conflicts. Even if you're available according to these hours,
				if you have an event on your calendar during a time slot, it won't be shown as available to book.</p></div></main></div>`);function Ye(X,u){be(u,!0);let x=p(R([{id:0,name:"Sunday"},{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"},{id:6,name:"Saturday"}].map(e=>{const a=u.data.rules?.filter(l=>l.day_of_week===e.id)||[];return{day:e.id,name:e.name,enabled:a.length>0,startTime:a[0]?.start_time||"09:00",endTime:a[0]?.end_time||"17:00"}}))),h=p(!1),y=p(!1),d=p(R(u.data.timezone||"UTC")),f=p(!1);const $={"America/Los_Angeles":"Pacific Time","America/Denver":"Mountain Time","America/Chicago":"Central Time","America/New_York":"Eastern Time","Europe/London":"UK, Ireland Time","Europe/Paris":"Central European Time","Europe/Amsterdam":"Amsterdam Time","Europe/Berlin":"Berlin Time","Asia/Tokyo":"Japan Time","Asia/Shanghai":"China Time","Australia/Sydney":"Sydney Time",UTC:"UTC Time"};function ee(e){return $[e]||e.replace(/_/g," ").split("/").pop()||e}function ae(e){try{return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:e}).format(new Date)}catch{return"--:--"}}function te(){return o(h,!0),o(y,!1),async({update:e,result:a})=>{await e({reset:!1}),o(h,!1),a.type==="success"&&a.data?.success&&(o(y,!0),setTimeout(()=>{o(y,!1)},3e3))}}var S=Ee(),F=s(i(S),2),N=i(F);{var re=e=>{var a=ke();m(e,a)};k(N,e=>{t(y)&&e(re)})}var Y=s(N,2);{var ie=e=>{var a=Se(),l=i(a);r(a),W(()=>b(l,`Error: ${u.form.error??""}`)),m(e,a)};k(Y,e=>{u.form?.error&&e(ie)})}var A=s(Y,2),j=s(i(A),4),_=i(j);_.__click=()=>o(f,!t(f));var H=s(i(_),2),C=i(H),se=i(C,!0);r(C);var I=s(C,2),oe=i(I);r(I),r(H),Z(2),r(_);var ne=s(_,2);{var de=e=>{we(e,{get selectedTimezone(){return t(d)},onSelect:a=>o(d,a,!0),onClose:()=>o(f,!1)})};k(ne,e=>{t(f)&&e(de)})}r(j),r(A);var J=s(A,2),z=s(i(J),4),E=i(z);g(E);var M=s(E,2);g(M);var D=s(M,2);he(D,21,()=>t(x),ye,(e,a,l)=>{var U=ze(),B=i(U),w=i(B);g(w);var L=s(w,2),ve=i(L,!0);r(L),r(B);var ue=s(B,2);{var ce=n=>{var c=Ae(),O=i(c);g(O);var K=s(O,4);g(K),r(c),Q(O,()=>t(a).startTime,P=>t(a).startTime=P),Q(K,()=>t(a).endTime,P=>t(a).endTime=P),m(n,c)},pe=n=>{var c=Ce();m(n,c)};k(ue,n=>{t(a).enabled?n(ce):n(pe,!1)})}r(U),W(()=>{G(w,"id",`day-${t(a).day??""}`),G(L,"for",`day-${t(a).day??""}`),b(ve,t(a).name)}),Te(w,()=>t(a).enabled,n=>t(a).enabled=n),m(e,U)}),r(D);var V=s(D,2),T=i(V),le=i(T,!0);r(T);var me=s(T,2);me.__click=()=>{o(x,t(x).map(e=>({...e,enabled:e.day>=1&&e.day<=5,startTime:"09:00",endTime:"17:00"})),!0)},r(V),r(z),fe(z,(e,a)=>_e?.(e,a),()=>te),r(J),Z(2),r(F),r(S),W((e,a,l)=>{b(se,e),b(oe,`${t(d)??""} (${a??""})`),q(E,l),q(M,t(d)),T.disabled=t(h),b(le,t(h)?"Saving...":"Save Availability")},[()=>ee(t(d)),()=>ae(t(d)),()=>JSON.stringify(t(x))]),m(X,S),ge()}xe(["click"]);export{Ye as component};
