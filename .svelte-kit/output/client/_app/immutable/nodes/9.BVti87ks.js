import"../chunks/DsnmJJEf.js";import{p as ra,k as m,m as _,o as oa,h as l,l as d,d as u,g as t,s as a,t as G,a as v,b as ia,r,n as y,f as la}from"../chunks/DQ3BFWhX.js";import{d as na,s as D}from"../chunks/CySGt9vl.js";import{i as b}from"../chunks/u6AVuwMs.js";import{a as sa,e as da}from"../chunks/B4Bv1KaN.js";import{r as w,a as Me,s as va}from"../chunks/BI5nyQHI.js";import{s as ua}from"../chunks/R6z4UYL7.js";import{b as Se,a as Ge}from"../chunks/C1Rppsd0.js";import{b as $}from"../chunks/dm5yZCSw.js";import{S as ca}from"../chunks/DZq_RO9z.js";var ga=u('<div class="bg-red-50 border border-red-200 text-red-800 rounded-lg p-4 mb-6"> </div>'),ma=u('<div class="relative mb-3 p-4 bg-gray-100 rounded-lg"><img alt="Cover preview" class="max-h-20 w-auto object-contain mx-auto"/> <button type="button" class="absolute top-2 right-2 bg-red-600 text-white p-1.5 rounded-full hover:bg-red-700 transition"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),ba=u('<div class="flex items-center gap-2 text-gray-500"><div class="w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"></div> <span>Uploading...</span></div>'),pa=u('<div class="text-center"><svg class="w-8 h-8 mx-auto text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <p class="text-sm text-gray-500">Click to upload cover image</p> <p class="text-xs text-gray-400">Max 2MB</p></div>'),fa=u("<option>Both Google & Outlook calendars</option>"),_a=u("<option>Google Calendar only</option>"),ya=u("<option>Outlook Calendar only</option>"),ha=u("<option>Google Calendar (with Google Meet)</option>"),xa=u("<option>Outlook Calendar (with Microsoft Teams)</option>"),ka=u('<div class="mb-4"><label for="availability_calendars" class="block text-sm font-medium text-gray-700 mb-2">Check availability from</label> <select id="availability_calendars" name="availability_calendars" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"><!><!><!></select> <p class="text-xs text-gray-500 mt-1">Which calendars to check when showing available time slots</p></div> <div><label for="invite_calendar" class="block text-sm font-medium text-gray-700 mb-2">Send calendar invite via</label> <select id="invite_calendar" name="invite_calendar" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"><!><!></select> <p class="text-xs text-gray-500 mt-1">The attendee will receive an invite from this calendar with the meeting link</p></div>',1),wa=u('<div class="border-t border-gray-200 pt-6"><h3 class="text-sm font-medium text-gray-900 mb-4">Calendar Settings</h3> <div class="mb-4 p-3 bg-gray-50 rounded-lg text-sm"><p class="text-gray-600 mb-1"><span class="font-medium">Check availability from:</span> </p> <p class="text-gray-600"><span class="font-medium">Send invite via:</span> </p> <p class="text-xs text-gray-500 mt-2">These are your global settings. <a href="/dashboard" class="text-blue-600 hover:underline">Change in Dashboard</a></p></div> <div class="flex items-center mb-4"><input type="checkbox" id="override_calendar_settings" name="override_calendar_settings" class="h-4 w-4 text-blue-600 rounded border-gray-300"/> <label for="override_calendar_settings" class="ml-2 text-sm text-gray-700">Override global calendar settings for this event type</label></div> <!></div>'),Ca=u('<div class="border-t border-gray-200 pt-6"><p class="text-sm text-gray-500">Connect a calendar in <a href="/dashboard" class="text-blue-600 hover:underline">Dashboard Settings</a> to configure calendar options.</p></div>'),Ta=u('<div class="min-h-screen bg-gray-50"><header class="bg-white shadow-sm"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"><div class="flex items-center gap-4"><a href="/dashboard" class="text-gray-600 hover:text-gray-900">‚Üê Back to Dashboard</a> <h1 class="text-2xl font-bold text-gray-900">Edit Event Type</h1></div></div></header> <main class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!> <div class="bg-white rounded-lg shadow-sm p-6"><form method="POST"><div class="space-y-6"><div><label for="name" class="block text-sm font-medium text-gray-700 mb-2">Event Name *</label> <input type="text" id="name" name="name" required placeholder="e.g., 30 Minute Meeting" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"/></div> <div><label for="slug" class="block text-sm font-medium text-gray-700 mb-2">URL Slug *</label> <input type="text" id="slug" name="slug" required pattern="[a-z0-9-]+" placeholder="e.g., 30min" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"/> <p class="text-xs text-gray-500 mt-1">Only lowercase letters, numbers, and hyphens. This will be part of your booking URL.</p></div> <div><label for="duration" class="block text-sm font-medium text-gray-700 mb-2">Duration (minutes) *</label> <select id="duration" name="duration" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"><option>15 minutes</option><option>30 minutes</option><option>45 minutes</option><option>60 minutes</option><option>90 minutes</option><option>2 hours</option></select></div> <div><label for="description" class="block text-sm font-medium text-gray-700 mb-2">Description</label> <!> <input type="hidden" name="description"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-2">Cover Image</label> <p class="text-xs text-gray-500 mb-3">This image will be displayed at the top of your booking page (like Calendly)</p> <!> <label><input type="file" accept="image/*" class="hidden"/> <!></label> <input type="hidden" name="cover_image"/></div> <!> <div class="flex items-center"><input type="checkbox" id="is_active" name="is_active" class="h-4 w-4 text-blue-600 rounded border-gray-300"/> <label for="is_active" class="ml-2 text-sm text-gray-700">Active (allow people to book this event type)</label></div> <div class="flex gap-4 pt-4"><button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50"> </button> <a href="/dashboard" class="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition">Cancel</a></div></div></form></div></main></div>');function ja(De,o){ra(o,!0);let C=m(_(o.data.eventType.name)),I=m(_(o.data.eventType.slug)),ee=m(_(o.data.eventType.duration)),L=m(_(o.data.eventType.description||"")),ae=m(o.data.eventType.is_active===1),h=m(_(o.data.eventType.cover_image||"")),T=m(!1),x=m(!1);const k=o.data.googleConnected,p=o.data.outlookConnected&&o.data.outlookConfigured,Ie=!!(o.data.eventType.availability_calendars||o.data.eventType.invite_calendar);let O=m(Ie);function te(){return o.data.defaultAvailabilityCalendars?o.data.defaultAvailabilityCalendars:k&&p?"both":p?"outlook":"google"}function re(){return o.data.defaultInviteCalendar?o.data.defaultInviteCalendar:k?"google":p?"outlook":"google"}function Le(){return o.data.eventType.availability_calendars?o.data.eventType.availability_calendars:te()}function Oe(){return o.data.eventType.invite_calendar?o.data.eventType.invite_calendar:re()}let oe=m(_(Le())),ie=m(_(Oe()));function Ae(e){return e==="both"?"Both calendars":e==="outlook"?"Outlook Calendar":"Google Calendar"}function Be(e){return e==="outlook"?"Outlook (Microsoft Teams)":"Google Calendar (Google Meet)"}async function Ue(e){const c=e.target.files?.[0];if(c){if(c.size>2*1024*1024){alert("Image must be less than 2MB");return}d(x,!0);try{const g=new FileReader;g.onload=()=>{d(h,g.result,!0),d(x,!1)},g.onerror=()=>{alert("Failed to read image"),d(x,!1)},g.readAsDataURL(c)}catch{alert("Failed to upload image"),d(x,!1)}}}function je(){d(h,"")}oa(()=>{l(C)&&l(C)!==o.data.eventType.name&&d(I,l(C).toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),!0)});function ze(){return d(T,!0),async({update:e})=>{await e(),d(T,!1)}}var A=Ta(),le=a(t(A),2),ne=t(le);{var Ee=e=>{var n=ga(),c=t(n);r(n),G(()=>D(c,`Error: ${o.form.error??""}`)),v(e,n)};b(ne,e=>{o.form?.error&&e(Ee)})}var se=a(ne,2),B=t(se),de=t(B),U=t(de),ve=a(t(U),2);w(ve),r(U);var j=a(U,2),ue=a(t(j),2);w(ue),y(2),r(j);var z=a(j,2),E=a(t(z),2),R=t(E);R.value=R.__value=15;var q=a(R);q.value=q.__value=30;var F=a(q);F.value=F.__value=45;var W=a(F);W.value=W.__value=60;var H=a(W);H.value=H.__value=90;var ce=a(H);ce.value=ce.__value=120,r(E),r(z);var N=a(z,2),ge=a(t(N),2);ca(ge,{placeholder:"Describe what this meeting is for...",get value(){return l(L)},set value(e){d(L,e,!0)}});var me=a(ge,2);w(me),r(N);var P=a(N,2),be=a(t(P),4);{var Re=e=>{var n=ma(),c=t(n),g=a(c,2);g.__click=je,r(n),G(()=>va(c,"src",l(h))),v(e,n)};b(be,e=>{l(h)&&e(Re)})}var M=a(be,2),V=t(M);V.__change=Ue;var qe=a(V,2);{var Fe=e=>{var n=ba();v(e,n)},We=e=>{var n=pa();v(e,n)};b(qe,e=>{l(x)?e(Fe):e(We,!1)})}r(M);var pe=a(M,2);w(pe),r(P);var fe=a(P,2);{var He=e=>{var n=wa(),c=a(t(n),2),g=t(c),Ve=a(t(g));r(g);var he=a(g,2),Je=a(t(he));r(he),y(2),r(c);var Q=a(c,2),xe=t(Q);w(xe),y(2),r(Q);var Ke=a(Q,2);{var Qe=f=>{var S=ka(),X=la(S),Y=a(t(X),2),ke=t(Y);{var Xe=i=>{var s=fa();s.value=s.__value="both",v(i,s)};b(ke,i=>{k&&p&&i(Xe)})}var we=a(ke);{var Ye=i=>{var s=_a();s.value=s.__value="google",v(i,s)};b(we,i=>{k&&i(Ye)})}var Ze=a(we);{var $e=i=>{var s=ya();s.value=s.__value="outlook",v(i,s)};b(Ze,i=>{p&&i($e)})}r(Y),y(2),r(X);var Ce=a(X,2),Z=a(t(Ce),2),Te=t(Z);{var ea=i=>{var s=ha();s.value=s.__value="google",v(i,s)};b(Te,i=>{k&&i(ea)})}var aa=a(Te);{var ta=i=>{var s=xa();s.value=s.__value="outlook",v(i,s)};b(aa,i=>{p&&i(ta)})}r(Z),y(2),r(Ce),$(Y,()=>l(oe),i=>d(oe,i)),$(Z,()=>l(ie),i=>d(ie,i)),v(f,S)};b(Ke,f=>{l(O)&&f(Qe)})}r(n),G((f,S)=>{D(Ve,` ${f??""}`),D(Je,` ${S??""}`)},[()=>Ae(te()),()=>Be(re())]),Ge(xe,()=>l(O),f=>d(O,f)),v(e,n)},Ne=e=>{var n=Ca();v(e,n)};b(fe,e=>{k||p?e(He):e(Ne,!1)})}var J=a(fe,2),_e=t(J);w(_e),y(2),r(J);var ye=a(J,2),K=t(ye),Pe=t(K,!0);r(K),y(2),r(ye),r(de),r(B),sa(B,(e,n)=>da?.(e,n),()=>ze),r(se),r(le),r(A),G(()=>{Me(me,l(L)),ua(M,1,`flex items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition ${l(h)?"hidden":""}`),V.disabled=l(x),Me(pe,l(h)),K.disabled=l(T),D(Pe,l(T)?"Saving...":"Save Changes")}),Se(ve,()=>l(C),e=>d(C,e)),Se(ue,()=>l(I),e=>d(I,e)),$(E,()=>l(ee),e=>d(ee,e)),Ge(_e,()=>l(ae),e=>d(ae,e)),v(De,A),ia()}na(["click","change"]);export{ja as component};
