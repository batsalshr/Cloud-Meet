import"../chunks/DsnmJJEf.js";import{p as X,d as C,a as p,b as Z,s,g as a,r,c as se,f as $,h as e,t as I,k as w,m as oe,n as ne,u as Y,l as n}from"../chunks/DQ3BFWhX.js";import{s as k,d as ie}from"../chunks/CySGt9vl.js";import{i as V}from"../chunks/u6AVuwMs.js";import{s as Q,r as le,a as de}from"../chunks/BI5nyQHI.js";import{P as ce,B as ve,a as ge,H as ue}from"../chunks/BH885Lyd.js";import{e as pe,i as be}from"../chunks/DKg4GSHA.js";import{s as me}from"../chunks/R6z4UYL7.js";var xe=C('<p class="text-sm text-gray-600 mb-3"> </p>'),he=C('<div class="bg-white rounded-lg shadow-sm p-4 border border-gray-200"><div class="flex justify-between items-start mb-2"><div><h3 class="font-semibold text-gray-900"> </h3> <p class="text-sm text-gray-600"> </p></div> <span> </span></div> <!> <div class="flex gap-2"><a target="_blank" class="text-sm text-blue-600 hover:text-blue-700">View Page</a> <span class="text-gray-300">|</span> <a class="text-sm text-blue-600 hover:text-blue-700">Edit</a></div></div>'),fe=C('<div class="bg-white rounded-lg shadow-sm p-8 text-center border border-gray-200"><p class="text-gray-600 mb-4">No event types yet</p> <a href="/dashboard/event-types/new" class="inline-block px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">Create Your First Event Type</a></div>'),ye=C('<div><div class="flex justify-between items-center mb-4"><h2 class="text-xl font-bold text-gray-900">Event Types</h2> <a href="/dashboard/event-types/new" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm">+ New Event Type</a></div> <div class="space-y-4"><!></div></div>');function _e(U,o){X(o,!0);var d=ye(),v=s(a(d),2),T=a(v);{var b=i=>{var m=se(),N=$(m);pe(N,17,()=>o.eventTypes,be,(A,l)=>{var S=he(),x=a(S),E=a(x),h=a(E),P=a(h,!0);r(h);var f=s(h,2),D=a(f);r(f),r(E);var y=s(E,2),F=a(y,!0);r(y),r(x);var j=s(x,2);{var H=_=>{var u=xe(),J=a(u,!0);r(u),I(()=>k(J,e(l).description)),p(_,u)};V(j,_=>{e(l).description&&_(H)})}var M=s(j,2),R=a(M),O=s(R,4);r(M),r(S),I(()=>{k(P,e(l).name),k(D,`${e(l).duration??""} minutes`),me(y,1,`px-2 py-1 text-xs rounded-full ${e(l).is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`),k(F,e(l).is_active?"Active":"Inactive"),Q(R,"href",`/${e(l).slug??""}`),Q(O,"href",`/dashboard/event-types/${e(l).id??""}`)}),p(A,S)}),p(i,m)},B=i=>{var m=fe();p(i,m)};V(T,i=>{o.eventTypes&&o.eventTypes.length>0?i(b):i(B,!1)})}r(v),r(d),p(U,d),Z()}var we=C('<div class="bg-green-50 border border-green-200 text-green-800 rounded-lg p-3 text-sm mb-4"> </div>'),ke=C('<div class="min-h-screen bg-gray-50"><header class="bg-white shadow-sm"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"><div class="flex justify-between items-center"><div><h1 class="text-2xl font-bold text-gray-900">Dashboard</h1> <p class="text-sm text-gray-600"> </p></div> <div class="flex gap-4"><a href="/dashboard/calendars" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition">Calendars</a> <a href="/dashboard/emails" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition">Emails</a> <a href="/dashboard/availability" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">Set Availability</a> <form method="POST" action="/auth/logout"><button type="submit" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition">Logout</button></form></div></div></div></header> <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!> <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8"><h2 class="text-lg font-semibold text-blue-900 mb-2">Your Booking Page</h2> <div class="flex items-center gap-2"><input type="text" readonly="" class="flex-1 px-3 py-2 bg-white border border-blue-300 rounded-md text-sm"/> <button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition text-sm">Copy Link</button></div></div> <!> <div class="grid grid-cols-1 lg:grid-cols-2 gap-8"><!> <!></div></main></div> <!> <!>',1);function Re(U,o){X(o,!0);let d=w(oe(o.data.recentBookings||[])),v=w(null),T=w(!1),b=w(""),B=w(null),i=w("");function m(t){n(v,t,!0),n(T,!0)}function N(){n(T,!1),n(v,null)}async function A(t){if(!e(v))return;const c=await fetch("/api/bookings/cancel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookingId:e(v),message:t||null})});if(!c.ok){const g=await c.json();throw new Error(g.message||"Failed to cancel booking")}n(d,e(d).map(g=>g.id===e(v)?{...g,status:"canceled"}:g),!0),n(b,"Booking cancelled successfully"),N(),setTimeout(()=>n(b,""),3e3)}function l(t){return t&&e(d).find(c=>c.id===t)||null}function S(t){n(B,t,!0)}function x(){n(B,null)}async function E(t,c,g,re){const K=await fetch("/api/bookings/propose-reschedule",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookingId:t,proposedStartTime:c,proposedEndTime:g,message:re||null})});if(!K.ok){const L=await K.json();throw new Error(L.message||"Failed to send reschedule proposal")}n(d,e(d).map(L=>L.id===t?{...L,status:"rescheduled"}:L),!0),n(i,"Reschedule proposal sent to attendee"),x(),setTimeout(()=>n(i,""),3e3)}var h=ke(),P=$(h),f=a(P),D=a(f),y=a(D),F=a(y),j=s(a(F),2),H=a(j);r(j),r(F),ne(2),r(y),r(D),r(f);var M=s(f,2),R=a(M);ce(R,{get user(){return o.data.user}});var O=s(R,2),_=s(a(O),2),u=a(_);le(u);var J=s(u,2);J.__click=()=>{navigator.clipboard.writeText(o.data.appUrl+"/")},r(_),r(O);var W=s(O,2);{var ee=t=>{var c=we(),g=a(c,!0);r(c),I(()=>k(g,e(b)||e(i))),p(t,c)};V(W,t=>{(e(b)||e(i))&&t(ee)})}var q=s(W,2),z=a(q);{let t=Y(()=>o.data.eventTypes||[]);_e(z,{get eventTypes(){return e(t)}})}var te=s(z,2);ve(te,{get bookings(){return e(d)},onCancelClick:m,onRescheduleClick:S}),r(q),r(M),r(P);var G=s(P,2);{let t=Y(()=>l(e(v)));ge(G,{get booking(){return e(t)},get show(){return e(T)},onClose:N,onCancel:A})}var ae=s(G,2);{let t=Y(()=>l(e(B)));ue(ae,{get booking(){return e(t)},onClose:x,onSubmit:E})}I(()=>{k(H,`Welcome back, ${(o.data.user?.name||"User")??""}!`),de(u,`${o.data.appUrl??""}/`)}),p(U,h),Z()}ie(["click"]);export{Re as component};
