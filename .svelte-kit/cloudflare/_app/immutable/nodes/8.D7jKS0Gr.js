import"../chunks/DsnmJJEf.js";import{o as Oe}from"../chunks/CdhubeB1.js";import{p as He,k as L,m as ie,d as g,a as _,b as Re,s as l,g as a,l as o,h as e,r as t,t as A,f as Je,n as q,j as ke}from"../chunks/DQ3BFWhX.js";import{d as Pe,s as p}from"../chunks/CySGt9vl.js";import{i as I}from"../chunks/u6AVuwMs.js";import{e as je,i as Ce}from"../chunks/DKg4GSHA.js";import{r as D,s as K,b as Me}from"../chunks/BI5nyQHI.js";import{b as Q}from"../chunks/C1Rppsd0.js";var Ue=g('<div class="bg-red-50 border border-red-200 text-red-800 rounded-lg p-4 mb-6"> </div>'),Ve=g('<div class="bg-green-50 border border-green-200 text-green-800 rounded-lg p-4 mb-6"> </div>'),We=g('<div class="flex justify-center py-12"><div class="w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"></div></div>'),Ye=g('<div class="border-t border-gray-200 p-4 bg-gray-50"><div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-1">Subject Line</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Custom Message (Optional)</label> <textarea placeholder="Add a personal message that will appear in the email..." rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"></textarea> <p class="text-xs text-gray-500 mt-1">This message will be added to the email template</p></div> <div class="flex justify-end gap-2"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition disabled:opacity-50"> </button></div></div></div>'),Ge=g(`<div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"><div class="p-4"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="p-2 bg-gray-100 rounded-lg"><svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></div> <div><h3 class="font-medium text-gray-900"> </h3> <p class="text-sm text-gray-500"> </p></div></div> <div class="flex items-center gap-3"><button class="text-sm text-blue-600 hover:text-blue-700"> </button> <label class="relative inline-flex items-center cursor-pointer"><input type="checkbox" class="sr-only peer"/> <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div></label></div></div></div> <!></div>`),Ie=g('<div class="border-t border-gray-200 p-4 bg-gray-50"><div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-1">Subject Line</label> <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-1">Custom Message (Optional)</label> <textarea placeholder="Add a personal message that will appear in the reminder..." rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"></textarea></div> <div class="flex justify-end gap-2"><button class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition disabled:opacity-50"> </button></div></div></div>'),qe=g(`<div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"><div class="p-4"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="p-2 bg-amber-100 rounded-lg"><svg class="w-5 h-5 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></div> <div><h3 class="font-medium text-gray-900"> </h3> <p class="text-sm text-gray-500"> </p></div></div> <div class="flex items-center gap-3"><button class="text-sm text-blue-600 hover:text-blue-700"> </button> <label class="relative inline-flex items-center cursor-pointer"><input type="checkbox" class="sr-only peer"/> <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div></label></div></div></div> <!></div>`),De=g('<div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-6"><div class="flex gap-3"><svg class="w-5 h-5 text-green-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="text-sm text-green-800"><p class="font-medium mb-1">Calendar Notifications</p> <p>Your attendees will always receive calendar invitations with meeting details and video call links (Google Meet or Microsoft Teams). The emails below are <strong>additional</strong> custom notifications you can send.</p></div></div></div> <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"><div class="flex gap-3"><svg class="w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="text-sm text-blue-800"><p class="font-medium mb-1">Email Variables</p> <p>You can use these variables in your subject lines:</p> <code class="text-xs bg-blue-100 px-1 py-0.5 rounded"></code>, <code class="text-xs bg-blue-100 px-1 py-0.5 rounded"></code>, <code class="text-xs bg-blue-100 px-1 py-0.5 rounded"></code>, <code class="text-xs bg-blue-100 px-1 py-0.5 rounded"></code>, <code class="text-xs bg-blue-100 px-1 py-0.5 rounded"></code></div></div></div> <div class="mb-8"><h2 class="text-lg font-semibold text-gray-900 mb-4">Booking Notifications</h2> <div class="space-y-3"></div></div> <div><h2 class="text-lg font-semibold text-gray-900 mb-4">Meeting Reminders</h2> <p class="text-sm text-gray-600 mb-4">Automatically remind attendees before their scheduled meetings.</p> <div class="space-y-3"></div></div> <div class="mt-6 bg-amber-50 border border-amber-200 rounded-lg p-4"><div class="flex gap-3"><svg class="w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div class="text-sm text-amber-800"><p class="font-medium">Reminder emails are processed every few minutes</p> <p class="mt-1">Reminders are sent automatically based on your settings. Make sure your email configuration is set up correctly in your environment.</p></div></div></div>',1),Ke=g('<div class="min-h-screen bg-gray-50"><header class="bg-white shadow-sm"><div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4"><div class="flex items-center gap-4"><a href="/dashboard" class="text-gray-500 hover:text-gray-700"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg></a> <div><h1 class="text-2xl font-bold text-gray-900">Email Settings</h1> <p class="text-sm text-gray-600">Manage your automated email notifications</p></div></div></div></header> <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!> <!> <!></main></div>');function st(Te,Se){He(Se,!0);let x=L(ie([])),oe=L(!0),v=L(null),y=L(""),N=L(""),n=L(null),f=ie({}),h=ie({});Oe(async()=>{await Ee()});async function Ee(){try{const r=await fetch("/api/email-templates");if(!r.ok)throw new Error("Failed to fetch templates");const d=await r.json();o(x,d.templates,!0),e(x).forEach(i=>{f[i.template_type]=i.subject||i.default_subject,h[i.template_type]=i.custom_message||""})}catch(r){o(y,r.message||"Failed to load email templates",!0)}finally{o(oe,!1)}}async function de(r){o(v,r.template_type,!0),o(y,"");try{if(!(await fetch("/api/email-templates",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({template_type:r.template_type,is_enabled:!r.is_enabled,subject:f[r.template_type],custom_message:h[r.template_type]||null})})).ok)throw new Error("Failed to update template");o(x,e(x).map(i=>i.template_type===r.template_type?{...i,is_enabled:!i.is_enabled}:i),!0)}catch(d){o(y,d.message||"Failed to update template",!0)}finally{o(v,null)}}async function ne(r){o(v,r.template_type,!0),o(y,""),o(N,"");try{if(!(await fetch("/api/email-templates",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({template_type:r.template_type,is_enabled:r.is_enabled,subject:f[r.template_type],custom_message:h[r.template_type]||null})})).ok)throw new Error("Failed to save template");o(x,e(x).map(i=>i.template_type===r.template_type?{...i,subject:f[r.template_type],custom_message:h[r.template_type]||null}:i),!0),o(N,`${r.name} settings saved`),setTimeout(()=>o(N,""),3e3),o(n,null)}catch(d){o(y,d.message||"Failed to save template",!0)}finally{o(v,null)}}function ce(r){switch(r){case"confirmation":return"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z";case"cancellation":return"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z";case"reschedule":return"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15";case"reminder_24h":case"reminder_1h":case"reminder_30m":return"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z";default:return"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}}var X=Ke(),ve=l(a(X),2),pe=a(ve);{var ze=r=>{var d=Ue(),i=a(d,!0);t(d),A(()=>p(i,e(y))),_(r,d)};I(pe,r=>{e(y)&&r(ze)})}var ue=l(pe,2);{var Be=r=>{var d=Ve(),i=a(d,!0);t(d),A(()=>p(i,e(N))),_(r,d)};I(ue,r=>{e(N)&&r(Be)})}var Fe=l(ue,2);{var Le=r=>{var d=We();_(r,d)},Ae=r=>{var d=De(),i=l(Je(d),2),me=a(i),be=l(a(me),2),_e=l(a(be),4);_e.textContent="{event_name}";var ge=l(_e,2);ge.textContent="{host_name}";var xe=l(ge,2);xe.textContent="{attendee_name}";var fe=l(xe,2);fe.textContent="{date}";var Ne=l(fe,2);Ne.textContent="{time}",t(be),t(me),t(i);var Z=l(i,2),he=l(a(Z),2);je(he,21,()=>e(x).filter(w=>!w.template_type.startsWith("reminder_")),Ce,(w,s)=>{var k=Ge(),j=a(k),O=a(j),C=a(O),M=a(C),H=a(M),$=a(H);t(H),t(M);var R=l(M,2),T=a(R),ee=a(T,!0);t(T);var J=l(T,2),te=a(J,!0);t(J),t(R),t(C);var P=l(C,2),u=a(P);u.__click=()=>o(n,e(n)===e(s).template_type?null:e(s).template_type,!0);var ae=a(u,!0);t(u);var U=l(u,2),m=a(U);D(m),m.__change=()=>de(e(s)),q(2),t(U),t(P),t(O),t(j);var re=l(j,2);{var se=c=>{var S=Ye(),V=a(S),E=a(V),z=l(a(E),2);D(z),t(E);var B=l(E,2),W=l(a(B),2);ke(W),q(2),t(B);var Y=l(B,2),G=a(Y);G.__click=()=>o(n,null);var b=l(G,2);b.__click=()=>ne(e(s));var le=a(b,!0);t(b),t(Y),t(V),t(S),A(()=>{K(z,"placeholder",e(s).default_subject),b.disabled=e(v)===e(s).template_type,p(le,e(v)===e(s).template_type?"Saving...":"Save Changes")}),Q(z,()=>f[e(s).template_type],F=>f[e(s).template_type]=F),Q(W,()=>h[e(s).template_type],F=>h[e(s).template_type]=F),_(c,S)};I(re,c=>{e(n)===e(s).template_type&&c(se)})}t(k),A(c=>{K($,"d",c),p(ee,e(s).name),p(te,e(s).description),p(ae,e(n)===e(s).template_type?"Close":"Edit"),Me(m,e(s).is_enabled),m.disabled=e(v)===e(s).template_type},[()=>ce(e(s).template_type)]),_(w,k)}),t(he),t(Z);var ye=l(Z,2),we=l(a(ye),4);je(we,21,()=>e(x).filter(w=>w.template_type.startsWith("reminder_")),Ce,(w,s)=>{var k=qe(),j=a(k),O=a(j),C=a(O),M=a(C),H=a(M),$=a(H);t(H),t(M);var R=l(M,2),T=a(R),ee=a(T,!0);t(T);var J=l(T,2),te=a(J,!0);t(J),t(R),t(C);var P=l(C,2),u=a(P);u.__click=()=>o(n,e(n)===e(s).template_type?null:e(s).template_type,!0);var ae=a(u,!0);t(u);var U=l(u,2),m=a(U);D(m),m.__change=()=>de(e(s)),q(2),t(U),t(P),t(O),t(j);var re=l(j,2);{var se=c=>{var S=Ie(),V=a(S),E=a(V),z=l(a(E),2);D(z),t(E);var B=l(E,2),W=l(a(B),2);ke(W),t(B);var Y=l(B,2),G=a(Y);G.__click=()=>o(n,null);var b=l(G,2);b.__click=()=>ne(e(s));var le=a(b,!0);t(b),t(Y),t(V),t(S),A(()=>{K(z,"placeholder",e(s).default_subject),b.disabled=e(v)===e(s).template_type,p(le,e(v)===e(s).template_type?"Saving...":"Save Changes")}),Q(z,()=>f[e(s).template_type],F=>f[e(s).template_type]=F),Q(W,()=>h[e(s).template_type],F=>h[e(s).template_type]=F),_(c,S)};I(re,c=>{e(n)===e(s).template_type&&c(se)})}t(k),A(c=>{K($,"d",c),p(ee,e(s).name),p(te,e(s).description),p(ae,e(n)===e(s).template_type?"Close":"Edit"),Me(m,e(s).is_enabled),m.disabled=e(v)===e(s).template_type},[()=>ce(e(s).template_type)]),_(w,k)}),t(we),t(ye),q(2),_(r,d)};I(Fe,r=>{e(oe)?r(Le):r(Ae,!1)})}t(ve),t(X),_(Te,X),Re()}Pe(["click","change"]);export{st as component};
