import"../chunks/DsnmJJEf.js";import{p as bt,k as f,m as ie,o as ft,d as m,t as b,a as u,b as xt,l,h as e,i as _t,$ as pt,g as a,r as t,f as J,s as r,n as Ee,c as Ae}from"../chunks/DQ3BFWhX.js";import{d as yt,s as v}from"../chunks/CySGt9vl.js";import{i as x}from"../chunks/u6AVuwMs.js";import{e as kt,i as wt}from"../chunks/DKg4GSHA.js";import{h as Mt,F as Ie}from"../chunks/iqOSawfn.js";import{s as G}from"../chunks/BI5nyQHI.js";import{s as Re}from"../chunks/BXbUNSRB.js";import{d as St,g as Tt,T as Ct}from"../chunks/-WyYYBJa.js";import{c as Dt,B as jt}from"../chunks/BFozC6y8.js";import{f as ke}from"../chunks/BjWePiXU.js";var zt=m('<div class="flex items-start gap-3"><svg class="w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> <a target="_blank" class="hover:underline break-all" style="color: var(--brand-color)"> </a></div>'),Ft=m('<div class="bg-white rounded-2xl shadow-lg p-8 max-w-md w-full"><div class="text-center"><div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6"><svg class="w-10 h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <h1 class="text-2xl font-semibold text-gray-900 mb-2">Meeting Rescheduled!</h1> <p class="text-gray-600 mb-8">Your meeting has been rescheduled. A calendar update has been sent to your email.</p> <div class="bg-gray-50 rounded-lg p-6 text-left mb-6"><h3 class="font-semibold text-gray-900 mb-4"> </h3> <div class="space-y-3 text-sm"><div class="flex items-start gap-3"><svg class="w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <div><p class="text-gray-900 font-medium">New Time</p> <p class="text-gray-700"> </p> <p class="text-gray-500"> </p></div></div> <!></div></div></div></div> <!>',1),Nt=m('<div class="p-6 pb-4 flex justify-center"><img alt="" class="max-h-16 w-auto object-contain"/></div> <div class="border-b border-gray-200 mx-6"></div>',1),Bt=m('<img class="w-12 h-12 rounded-full object-cover mb-3"/>'),Et=m('<div class="w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold text-lg mb-3" style="background-color: var(--brand-color)"> </div>'),At=m('<div class="mt-4"><p class="text-xs font-semibold text-gray-500 uppercase mb-2">New time</p> <div class="bg-green-50 rounded-lg p-3 text-sm"><p class="font-medium text-green-900"> </p> <p class="text-green-700"> </p></div></div>'),It=m('<div class="bg-red-50 border border-red-200 text-red-800 rounded-lg p-4 mb-6 max-w-2xl"> </div>'),Rt=m('<div class="flex items-center justify-center py-8"><div class="animate-spin rounded-full h-8 w-8 border-2 border-t-transparent" style="border-color: var(--brand-color); border-top-color: transparent"></div></div>'),Vt=m('<p class="text-sm text-gray-500 py-4">No available times</p>'),Ht=m('<button type="button" class="w-full py-2.5 px-3 border-2 border-gray-900 bg-gray-900 text-white rounded-lg text-sm font-semibold"> </button>'),Lt=m('<button type="button" class="w-full py-2.5 px-3 border-2 rounded-lg text-sm font-semibold transition" style="border-color: var(--brand-color); color: var(--brand-color)"> </button>'),Ot=m('<div class="space-y-2 overflow-y-auto flex-1 pr-2 pb-2 scrollbar-thin"></div>'),Ut=m('<div class="w-52 ml-6 border-l border-gray-200 pl-6 flex flex-col" style="max-height: 400px;"><h3 class="text-sm font-medium text-gray-500 mb-4 flex-shrink-0"> </h3> <!></div>'),Yt=m('<div class="mt-6 pt-6 border-t border-gray-200"><button class="w-full py-3 px-6 text-white rounded-full font-semibold transition disabled:opacity-50" style="background-color: var(--brand-color)"> </button></div>'),Jt=m('<div class="bg-white rounded-2xl shadow-lg overflow-hidden flex transition-all duration-300 ease-in-out"><div class="w-72 border-r border-gray-200 flex flex-col flex-shrink-0"><!> <div class="flex-1 p-6"><div class="mb-6"><!> <p class="text-sm font-medium text-gray-600 mb-1"> </p> <h1 class="text-2xl font-bold text-gray-900"> </h1></div> <div class="space-y-4 text-sm text-gray-600"><div class="flex items-center gap-3"><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div> <div class="flex items-center gap-3"><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> <span> </span></div></div> <div class="mt-6 pt-6 border-t border-gray-200"><p class="text-xs font-semibold text-gray-500 uppercase mb-2">Current booking</p> <div class="bg-red-50 rounded-lg p-3 text-sm"><p class="font-medium text-red-900"> </p> <p class="text-red-700"> </p> <p class="text-red-600 text-xs"> </p></div></div> <!></div></div> <div class="flex-1 p-6"><!> <div class="flex items-stretch"><div class="w-80"><h2 class="text-xl font-semibold text-gray-900 mb-6">Select a New Date & Time</h2> <!> <div class="mt-6 relative"><p class="text-sm font-semibold text-gray-900 mb-2">Time zone</p> <button type="button" class="flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 transition"><svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span> <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div></div> <!></div> <!> <div class="mt-4 text-center"><a class="text-sm text-gray-500 hover:text-red-600 transition">Or cancel this meeting instead</a></div></div></div> <!>',1),Gt=m('<div class="min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4"><!></div>');function ra(Ve,s){bt(s,!0);const P=s.data.booking.brandColor,M=Dt(P);let y=f(null),h=f(null),Z=f(ie([])),ne=f(!1),z=f("idle"),q=f(""),se=f(null),le=f(ie(new Set)),we=f(!1),C=f(ie(St())),K=f(!1),k=f(ie(new Date));const de=s.data.timeFormat!=="24h";function F(n){const d=new Date(n);return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:de,timeZone:e(C)}).format(d)}function He(n,d){return`${F(n)} - ${F(d)}`}function Le(n){const d=new Date(n);return new Intl.DateTimeFormat("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:de,timeZone:e(C)}).format(d)}function Oe(){l(k,new Date(e(k).getFullYear(),e(k).getMonth()-1,1),!0),ve()}function Ue(){l(k,new Date(e(k).getFullYear(),e(k).getMonth()+1,1),!0),ve()}async function ve(){l(we,!0);try{const n=e(k).getFullYear(),d=e(k).getMonth()+1,g=`${n}-${String(d).padStart(2,"0")}`,w=await fetch(`/api/availability/month?event=${s.data.booking.eventSlug}&month=${g}`);if(!w.ok)throw new Error("Failed to fetch availability");const D=await w.json();l(le,new Set(D.availableDates||[]),!0)}catch(n){console.error("Error fetching month availability:",n),l(le,new Set,!0)}finally{l(we,!1)}}ft(()=>{ve()});async function Ye(n){l(y,n,!0),l(h,null),l(ne,!0);try{const d=await fetch(`/api/availability?event=${s.data.booking.eventSlug}&date=${n}`);if(!d.ok)throw new Error("Failed to fetch availability");const g=await d.json();l(Z,g.slots||[],!0)}catch(d){console.error("Error fetching availability:",d),l(Z,[],!0)}finally{l(ne,!1)}}function Je(n){l(h,n,!0)}async function Ge(){if(e(h)){l(z,"submitting"),l(q,"");try{const n=await fetch("/api/bookings/reschedule",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookingId:s.data.booking.id,newStartTime:e(h).start,newEndTime:e(h).end,timezone:e(C)})});if(!n.ok){const g=await n.json();throw new Error(g.message||"Failed to reschedule booking")}const d=await n.json();l(se,d.meetingUrl||null,!0),l(z,"success")}catch(n){console.error("Reschedule error:",n),l(q,n.message||"Failed to reschedule booking",!0),l(z,"error")}}}var Q=Gt();Mt("sewpl5",n=>{_t(()=>{pt.title="Reschedule Meeting"})});var Pe=a(Q);{var Ze=n=>{var d=Ft(),g=J(d),w=a(g),D=r(a(w),6),V=a(D),W=a(V,!0);t(V);var N=r(V,2),B=a(N),X=r(a(B),2),H=r(a(X),2),L=a(H,!0);t(H);var $=r(H,2),ee=a($,!0);t($),t(X),t(B);var ce=r(B,2);{var O=S=>{var j=zt(),E=r(a(j),2),te=a(E,!0);t(E),t(j),b(()=>{G(E,"href",e(se)),v(te,s.data.booking.inviteCalendar==="outlook"?"Join Microsoft Teams Meeting":"Join Google Meet")}),u(S,j)};x(ce,S=>{e(se)&&S(O)})}t(N),t(D),t(w),t(g);var U=r(g,2);Ie(U,{class:"mt-6"}),b((S,j)=>{v(W,s.data.booking.eventName),v(L,S),v(ee,j)},[()=>e(h)?He(e(h).start,e(h).end):"",()=>e(y)?ke(e(y)):""]),u(n,d)},qe=n=>{var d=Jt(),g=J(d),w=a(g),D=a(w);{var V=o=>{var i=Nt(),c=J(i),_=a(c);t(c),Ee(2),b(()=>G(_,"src",s.data.booking.coverImage)),u(o,i)};x(D,o=>{s.data.booking.coverImage&&o(V)})}var W=r(D,2),N=a(W),B=a(N);{var X=o=>{var i=Bt();b(()=>{G(i,"src",s.data.booking.profileImage),G(i,"alt",s.data.booking.hostName)}),u(o,i)},H=o=>{var i=Et(),c=a(i,!0);t(i),b(_=>v(c,_),[()=>s.data.booking.hostName?.charAt(0)||"H"]),u(o,i)};x(B,o=>{s.data.booking.profileImage?o(X):o(H,!1)})}var L=r(B,2),$=a(L,!0);t(L);var ee=r(L,2),ce=a(ee,!0);t(ee),t(N);var O=r(N,2),U=a(O),S=r(a(U),2),j=a(S);t(S),t(U);var E=r(U,2),te=r(a(E),2),Ke=a(te,!0);t(te),t(E),t(O);var ue=r(O,2),Me=r(a(ue),2),me=a(Me),Qe=a(me,!0);t(me);var ge=r(me,2),We=a(ge,!0);t(ge);var Se=r(ge,2),Xe=a(Se,!0);t(Se),t(Me),t(ue);var $e=r(ue,2);{var et=o=>{var i=At(),c=r(a(i),2),_=a(c),fe=a(_);t(_);var re=r(_,2),xe=a(re,!0);t(re),t(c),t(i),b((p,A,_e)=>{v(fe,`${p??""} - ${A??""}`),v(xe,_e)},[()=>F(e(h).start),()=>F(e(h).end),()=>e(y)?ke(e(y)):""]),u(o,i)};x($e,o=>{e(h)&&o(et)})}t(W),t(w);var Te=r(w,2),Ce=a(Te);{var tt=o=>{var i=It(),c=a(i,!0);t(i),b(()=>v(c,e(q))),u(o,i)};x(Ce,o=>{e(q)&&o(tt)})}var he=r(Ce,2),be=a(he),De=r(a(be),2);jt(De,{get currentMonth(){return e(k)},get selectedDate(){return e(y)},get availableDates(){return e(le)},get brandColor(){return P},get brandLighter(){return M.lighter},get brandDark(){return M.dark},onDateSelect:Ye,onPrevMonth:Oe,onNextMonth:Ue});var je=r(De,2),ae=r(a(je),2);ae.__click=()=>l(K,!e(K));var ze=r(a(ae),2),at=a(ze);t(ze),Ee(2),t(ae);var rt=r(ae,2);{var ot=o=>{Ct(o,{get selectedTimezone(){return e(C)},onSelect:i=>l(C,i,!0),onClose:()=>l(K,!1),get brandColor(){return P}})};x(rt,o=>{e(K)&&o(ot)})}t(je),t(be);var it=r(be,2);{var nt=o=>{var i=Ut(),c=a(i),_=a(c,!0);t(c);var fe=r(c,2);{var re=p=>{var A=Rt();u(p,A)},xe=p=>{var A=Ae(),_e=J(A);{var vt=I=>{var Y=Vt();u(I,Y)},ct=I=>{var Y=Ot();kt(Y,21,()=>e(Z),wt,(ut,oe)=>{var Be=Ae(),mt=J(Be);{var gt=R=>{var T=Ht(),pe=a(T,!0);t(T),b(ye=>v(pe,ye),[()=>F(e(oe).start)]),u(R,T)},ht=R=>{var T=Lt();T.__click=()=>Je(e(oe));var pe=a(T,!0);t(T),b(ye=>v(pe,ye),[()=>F(e(oe).start)]),u(R,T)};x(mt,R=>{e(h)===e(oe)?R(gt):R(ht,!1)})}u(ut,Be)}),t(Y),u(I,Y)};x(_e,I=>{e(Z).length===0?I(vt):I(ct,!1)},!0)}u(p,A)};x(fe,p=>{e(ne)?p(re):p(xe,!1)})}t(i),b(p=>v(_,p),[()=>ke(e(y)).split(",")[0]]),u(o,i)};x(it,o=>{e(y)&&o(nt)})}t(he);var Fe=r(he,2);{var st=o=>{var i=Yt(),c=a(i);c.__click=Ge;var _=a(c,!0);t(c),t(i),b(()=>{c.disabled=e(z)==="submitting",v(_,e(z)==="submitting"?"Rescheduling...":"Confirm Reschedule")}),u(o,i)};x(Fe,o=>{e(h)&&o(st)})}var Ne=r(Fe,2),lt=a(Ne);t(Ne),t(Te),t(g);var dt=r(g,2);Ie(dt,{class:"mt-6"}),b((o,i)=>{Re(g,`width: ${e(y)?"920px":"650px"}`),v($,s.data.booking.hostName),v(ce,s.data.booking.eventName),v(j,`${s.data.booking.duration??""} min`),v(Ke,s.data.booking.inviteCalendar==="outlook"?"Microsoft Teams":"Google Meet"),v(Qe,o),v(We,s.data.booking.attendeeName),v(Xe,s.data.booking.attendeeEmail),v(at,`${e(C)??""} (${i??""})`),G(lt,"href",`/cancel/${s.data.booking.id??""}`)},[()=>Le(s.data.booking.startTime),()=>Tt(e(C),de)]),u(n,d)};x(Pe,n=>{e(z)==="success"?n(Ze):n(qe,!1)})}t(Q),b(()=>Re(Q,`--brand-color: ${P??""}; --brand-light: ${M.light??""}; --brand-lighter: ${M.lighter??""}; --brand-dark: ${M.dark??""}; --brand-rgb: ${M.rgb.r??""}, ${M.rgb.g??""}, ${M.rgb.b??""};`)),u(Ve,Q),xt()}yt(["click"]);export{ra as component};
