import{_ as xt}from"../chunks/PPVm8Dsz.js";import"../chunks/DsnmJJEf.js";import{t as b,E as ct,G as ut,a5 as It,aW as Lt,M as mt,N as Ot,a1 as Pt,aX as Rt,aY as Ut,ao as gt,D as Yt,an as Gt,F as Ve,p as Oe,d,s as o,g as r,r as t,j as _t,a as l,b as Pe,o as rt,l as n,k as H,f as _e,n as Ne,h as e,m as Se,$ as qt,u as we,c as Jt}from"../chunks/DQ3BFWhX.js";import{s as u,e as Ie,d as Wt}from"../chunks/CySGt9vl.js";import{i as D}from"../chunks/u6AVuwMs.js";import{e as Qe,i as $e}from"../chunks/DKg4GSHA.js";import{h as Xt,F as et}from"../chunks/iqOSawfn.js";import{r as Le,s as he}from"../chunks/BI5nyQHI.js";import{s as ft}from"../chunks/R6z4UYL7.js";import{s as le}from"../chunks/BXbUNSRB.js";import{b as ke}from"../chunks/C1Rppsd0.js";import{d as Zt,a as bt,T as ht}from"../chunks/-WyYYBJa.js";import{c as Kt,B as Qt,T as $t}from"../chunks/BFozC6y8.js";import{f as at,a as tt}from"../chunks/BjWePiXU.js";import{p as yt}from"../chunks/3dsfsjWY.js";function pt(de,a,C=!1,T=!1,h=!1){var x=de,f="";b(()=>{var M=It;if(f===(f=a()??"")){ct&&ut();return}if(M.nodes_start!==null&&(Lt(M.nodes_start,M.nodes_end),M.nodes_start=M.nodes_end=null),f!==""){if(ct){mt.data;for(var y=ut(),F=y;y!==null&&(y.nodeType!==Ot||y.data!=="");)F=y,y=Pt(y);if(y===null)throw Rt(),Ut;gt(mt,F),x=Yt(y);return}var m=f+"";C?m=`<svg>${m}</svg>`:T&&(m=`<math>${m}</math>`);var p=Gt(m);if((C||T)&&(p=Ve(p)),gt(Ve(p),p.lastChild),C||T)for(;Ve(p);)x.before(Ve(p));else x.before(p)}})}var er=d('<div class="bg-red-50 border border-red-200 text-red-800 rounded-lg p-4 mb-6"> </div>'),tr=d('<div class="max-w-md"><h2 class="text-xl font-semibold text-gray-900 mb-6">Enter Details</h2> <!> <form class="space-y-5"><div><label for="name" class="block text-sm font-medium text-gray-700 mb-2">Name *</label> <input type="text" id="name" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent outline-none"/></div> <div><label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email *</label> <input type="email" id="email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent outline-none"/></div> <div><label for="notes" class="block text-sm font-medium text-gray-700 mb-2">Please share anything that will help prepare for our meeting.</label> <textarea id="notes" rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent outline-none resize-none"></textarea></div> <button type="submit" class="w-full text-white py-3 px-6 rounded-full font-semibold transition disabled:opacity-50"> </button></form></div>');function rr(de,a){Oe(a,!0);let C=yt(a,"bookingForm",15);var T=tr(),h=o(r(T),2);{var x=w=>{var J=er(),A=r(J,!0);t(J),b(()=>u(A,a.bookingError)),l(w,J)};D(h,w=>{a.bookingError&&w(x)})}var f=o(h,2),M=r(f),y=o(r(M),2);Le(y),t(M);var F=o(M,2),m=o(r(F),2);Le(m),t(F);var p=o(F,2),z=o(r(p),2);_t(z),t(p);var U=o(p,2),te=r(U,!0);t(U),t(f),t(T),b(()=>{le(y,`--tw-ring-color: ${a.brandColor??""}`),le(m,`--tw-ring-color: ${a.brandColor??""}`),le(z,`--tw-ring-color: ${a.brandColor??""}`),U.disabled=a.bookingStatus==="submitting",le(U,`background-color: ${a.brandColor??""}`),u(te,a.bookingStatus==="submitting"?"Scheduling...":"Schedule Event")}),Ie("submit",f,function(...w){a.onSubmit?.apply(this,w)}),ke(y,()=>C().name,w=>C(C().name=w,!0)),ke(m,()=>C().email,w=>C(C().email=w,!0)),ke(z,()=>C().notes,w=>C(C().notes=w,!0)),Ie("mouseenter",U,w=>w.currentTarget.style.backgroundColor=a.brandDark),Ie("mouseleave",U,w=>w.currentTarget.style.backgroundColor=a.brandColor),l(de,T),Pe()}var ar=d('<div class="flex items-start gap-3"><svg class="w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> <a target="_blank" class="hover:underline break-all"> </a></div>'),or=d('<div class="bg-white rounded-2xl shadow-lg p-6 sm:p-8 max-w-md w-full mx-2"><div class="text-center"><div class="w-16 h-16 sm:w-20 sm:h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6"><svg class="w-8 h-8 sm:w-10 sm:h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <h1 class="text-xl sm:text-2xl font-semibold text-gray-900 mb-2">You are scheduled</h1> <p class="text-gray-600 mb-6 sm:mb-8 text-sm sm:text-base">A calendar invitation has been sent to your email address.</p> <div class="bg-gray-50 rounded-lg p-4 sm:p-6 text-left mb-6"><h3 class="font-semibold text-gray-900 mb-3 sm:mb-4"> </h3> <div class="space-y-3 text-sm"><div class="flex items-start gap-3"><svg class="w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <div><p class="text-gray-900"> </p> <p class="text-gray-500"> </p></div></div> <!></div></div></div></div>');function nr(de,a){Oe(a,!0);const T=yt(a,"meetingType",3,"google_meet")()==="teams"?"Join Microsoft Teams Meeting":"Join Google Meet";var h=or(),x=r(h),f=o(r(x),6),M=r(f),y=r(M,!0);t(M);var F=o(M,2),m=r(F),p=o(r(m),2),z=r(p),U=r(z,!0);t(z);var te=o(z,2),w=r(te,!0);t(te),t(p),t(m);var J=o(m,2);{var A=V=>{var I=ar(),B=o(r(I),2),ve=r(B,!0);t(B),t(I),b(()=>{he(B,"href",a.meetingUrl),le(B,`color: ${a.brandColor??""}`),u(ve,T)}),l(V,I)};D(J,V=>{a.meetingUrl&&V(A)})}t(F),t(f),t(x),t(h),b((V,I)=>{u(y,a.eventName),u(U,V),u(w,I)},[()=>a.formatTimeRange(a.selectedSlot.start,a.selectedSlot.end),()=>a.formatSelectedDate(a.selectedDate)]),l(de,h),Pe()}var ir=d('<div class="p-6 pb-4 flex justify-center"><img alt="" class="max-h-16 w-auto object-contain"/></div> <div class="border-b border-gray-200 mx-6"></div>',1),sr=d('<img class="w-12 h-12 rounded-full object-cover mb-3"/>'),lr=d('<div class="w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold text-lg mb-3"> </div>'),dr=d('<div class="mt-6 pt-6 border-t border-gray-200"><div class="text-sm text-gray-600 prose prose-sm max-w-none [&amp;_p]:my-2 [&amp;_ul]:my-2 [&amp;_ol]:my-2 [&amp;_li]:my-1"><!></div></div>'),vr=d('<div class="mt-6 pt-6 border-t border-gray-200"><div class="flex items-center gap-3 text-sm"><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <div><p class="font-medium text-gray-900"> </p> <p class="text-gray-500"> </p></div></div></div>'),cr=d('<div class="w-72 border-r border-gray-200 flex flex-col flex-shrink-0"><!> <div class="flex-1 p-6"><div class="mb-6"><!> <p class="text-sm font-medium text-gray-600 mb-1"> </p> <h1 class="text-2xl font-bold text-gray-900"> </h1></div> <div class="space-y-4 text-sm text-gray-600"><div class="flex items-center gap-3"><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div> <div class="flex items-center gap-3"><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> <span> </span></div></div> <!> <!></div></div>');function ur(de,a){Oe(a,!0);let C=H("");rt(()=>{a.eventType?.description?xt(async()=>{const{default:_}=await import("../chunks/BnK-J2To.js").then(k=>k.b);return{default:_}},[],import.meta.url).then(({default:_})=>{n(C,_.sanitize(a.eventType.description),!0)}):n(C,"")});const T=a.eventType?.invite_calendar==="outlook"?"Microsoft Teams":"Google Meet";var h=cr(),x=r(h);{var f=_=>{var k=ir(),P=_e(k),X=r(P);t(P),Ne(2),b(()=>he(X,"src",a.eventType.cover_image)),l(_,k)};D(x,_=>{a.eventType?.cover_image&&_(f)})}var M=o(x,2),y=r(M),F=r(y);{var m=_=>{var k=sr();b(()=>{he(k,"src",a.user.profileImage),he(k,"alt",a.user.name)}),l(_,k)},p=_=>{var k=lr(),P=r(k,!0);t(k),b(X=>{le(k,`background-color: ${a.brandColor??""}`),u(P,X)},[()=>a.user?.name?.charAt(0)||"M"]),l(_,k)};D(F,_=>{a.user?.profileImage?_(m):_(p,!1)})}var z=o(F,2),U=r(z,!0);t(z);var te=o(z,2),w=r(te,!0);t(te),t(y);var J=o(y,2),A=r(J),V=o(r(A),2),I=r(V);t(V),t(A);var B=o(A,2),ve=o(r(B),2),ce=r(ve,!0);t(ve),t(B),t(J);var De=o(J,2);{var Re=_=>{var k=dr(),P=r(k),X=r(P);pt(X,()=>e(C)),t(P),t(k),l(_,k)};D(De,_=>{a.eventType?.description&&_(Re)})}var Ue=o(De,2);{var Ye=_=>{var k=vr(),P=r(k),X=o(r(P),2),ye=r(X),Ce=r(ye);t(ye);var je=o(ye,2),Be=r(je,!0);t(je),t(X),t(P),t(k),b((Ge,pe,qe)=>{u(Ce,`${Ge??""} - ${pe??""}`),u(Be,qe)},[()=>a.formatTime(a.selectedSlot.start),()=>a.formatTime(a.selectedSlot.end),()=>at(a.selectedDate)]),l(_,k)};D(Ue,_=>{a.selectedDate&&a.selectedSlot&&_(Ye)})}t(M),t(h),b(()=>{u(U,a.user?.name||"Host"),u(w,a.eventType?.name||"Meeting"),u(I,`${a.eventType?.duration??""} min`),u(ce,T)}),l(de,h),Pe()}var mr=d('<link rel="icon" type="image/svg+xml"/>'),gr=d("<!> <!>",1),fr=d('<div class="px-6 pt-6 flex justify-center"><img alt="" class="max-h-16 w-auto object-contain"/></div> <div class="border-b border-gray-200 mx-6 mt-4"></div>',1),br=d('<div class="px-6 py-4"><button class="flex items-center gap-2 text-gray-600 hover:text-gray-900" aria-label="Go back"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> <span class="text-sm">Back</span></button></div>'),hr=d('<img class="w-24 h-24 rounded-full object-cover border-4 border-white shadow-lg"/>'),xr=d('<div class="w-24 h-24 rounded-full flex items-center justify-center text-white font-semibold text-3xl border-4 border-white shadow-lg" style="background-color: var(--brand-color)"> </div>'),_r=d('<div class="mt-2"><!></div>'),yr=d('<div class="px-6 pb-5 text-sm text-gray-600 prose prose-sm max-w-none"><!></div>'),pr=d('<div class="text-center text-xs font-medium text-gray-500 py-2"> </div>'),wr=d('<button type="button"> </button>'),kr=d('<div class="flex flex-col items-center pt-8 pb-6 px-6"><!> <p class="mt-4 text-base font-semibold text-gray-600"> </p></div> <div class="px-6 pb-5"><h1 class="text-2xl font-bold text-gray-900 text-center"> </h1></div> <div class="px-6 pb-5"><ul class="space-y-3 text-sm text-gray-600"><li class="flex items-center gap-3"><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></li> <li class="flex items-center gap-3"><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> <span> </span></li> <li class="flex items-center gap-3"><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <button type="button" class="flex items-center gap-1 hover:text-gray-900 transition"><span> </span> <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></li></ul> <!></div> <!> <div class="border-b border-gray-200 mx-6 mb-6"></div> <div class="px-6 pb-8"><h2 class="text-lg font-semibold text-gray-900 mb-5 text-center">Select a Date & Time</h2> <div class="flex items-center justify-between mb-4"><button class="p-2 hover:bg-gray-100 rounded-full transition" aria-label="Previous month"><svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button> <h3 class="text-base font-semibold text-gray-900"> </h3> <button class="p-2 hover:bg-gray-100 rounded-full transition" aria-label="Next month"><svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button></div> <div class="grid grid-cols-7 gap-1 mb-2"></div> <div class="grid grid-cols-7 gap-1"></div></div>',1),Tr=d('<div class="flex items-center justify-center py-8"><div class="animate-spin rounded-full h-8 w-8 border-2 border-t-transparent" style="border-color: var(--brand-color); border-top-color: transparent;"></div></div>'),Mr=d('<p class="text-sm text-gray-500 py-4 text-center">No available times for this date</p>'),Sr=d('<button type="button"> </button>'),Dr=d('<button type="button" class="w-full mt-6 py-3 px-6 text-white rounded-full font-semibold transition" style="background-color: var(--brand-color)">Next</button>'),Cr=d('<div class="grid grid-cols-2 gap-3"></div> <!>',1),jr=d('<div class="px-6 pb-8"><h2 class="text-lg font-semibold text-gray-900 mb-2 text-center">Select a Time</h2> <p class="text-sm text-gray-500 text-center mb-6"> </p> <!></div>'),Br=d('<div class="bg-red-50 border border-red-200 text-red-800 rounded-lg p-3 mb-4 text-sm"> </div>'),Er=d('<div class="px-6 pb-8"><!> <h2 class="text-lg font-semibold text-gray-900 mb-2 text-center">Enter Details</h2> <p class="text-sm text-gray-500 text-center mb-6"> </p> <form class="space-y-4"><div><label for="mobile-name" class="block text-sm font-medium text-gray-700 mb-1.5">Name *</label> <input type="text" id="mobile-name" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent outline-none text-sm" style="--tw-ring-color: var(--brand-color)"/></div> <div><label for="mobile-email" class="block text-sm font-medium text-gray-700 mb-1.5">Email *</label> <input type="email" id="mobile-email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent outline-none text-sm" style="--tw-ring-color: var(--brand-color)"/></div> <div><label for="mobile-notes" class="block text-sm font-medium text-gray-700 mb-1.5">Additional notes</label> <textarea id="mobile-notes" rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent outline-none resize-none text-sm" style="--tw-ring-color: var(--brand-color)"></textarea></div> <button type="submit" class="w-full text-white py-3 px-6 rounded-full font-semibold transition disabled:opacity-50" style="background-color: var(--brand-color)"> </button></form></div>'),zr=d('<div class="bg-red-50 border border-red-200 text-red-800 rounded-lg p-4 mb-6 max-w-2xl"> </div>'),Fr=d('<div class="flex items-stretch"><div class="w-80"><h2 class="text-xl font-semibold text-gray-900 mb-6">Select a Date & Time</h2> <!> <div class="mt-6 relative"><p class="text-sm font-semibold text-gray-900 mb-2">Time zone</p> <button type="button" class="flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 transition"><svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span> <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div></div> <!></div>'),Ar=d('<div class="md:hidden min-h-screen w-full bg-white"><!> <!> <!> <!> <!> <!></div> <div class="hidden md:flex bg-white rounded-2xl shadow-lg overflow-hidden transition-all duration-300 ease-in-out"><!> <div class="flex-1 p-6"><!> <!></div></div> <!>',1),Hr=d('<div class="min-h-screen bg-white md:bg-gray-100 flex flex-col items-center md:justify-center md:p-4"><!></div>');function Kr(de,a){Oe(a,!0);let C=H("");rt(()=>{a.data.eventType?.description?xt(async()=>{const{default:i}=await import("../chunks/BnK-J2To.js").then(s=>s.b);return{default:i}},[],import.meta.url).then(({default:i})=>{n(C,i.sanitize(a.data.eventType.description),!0)}):n(C,"")});const T=a.data.user?.brandColor||"#3b82f6",h=Kt(T);let x=H(null),f=H(null),M=H(Se([])),y=H(!1),F=H(!1),m=H(Se({name:"",email:"",notes:""})),p=H("idle"),z=H(""),U=H(null),te=H("google_meet"),w=H(Se(new Set)),J=H(!1),A=H("calendar"),V=H(Se(Zt())),I=H(!1),B=H(Se(new Date));const ve=a.data.user?.timeFormat!=="24h";function ce(i){const s=new Date(i);return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:ve,timeZone:e(V)}).format(s)}function De(i,s){return`${ce(i)} - ${ce(s)}`}function Re(i){const s=new Date(i+"T12:00:00");return new Intl.DateTimeFormat("en-US",{weekday:"short",month:"short",day:"numeric"}).format(s)}function Ue(i){return new Intl.DateTimeFormat("en-US",{month:"long",year:"numeric"}).format(i)}const Ye=we(()=>()=>{const i=e(B).getFullYear(),s=e(B).getMonth(),N=new Date(i,s,1),Z=new Date(i,s+1,0),ue=(N.getDay()+6)%7,me=[];for(let Y=0;Y<ue;Y++){const G=new Date(i,s,Y-ue+1);me.push({date:G,isCurrentMonth:!1,isAvailable:!1,dateStr:tt(G)})}const Te=new Date;Te.setHours(0,0,0,0);for(let Y=1;Y<=Z.getDate();Y++){const G=new Date(i,s,Y),Je=tt(G),ze=G>=Te&&G<=new Date(Te.getTime()+1440*60*60*1e3);me.push({date:G,isCurrentMonth:!0,isAvailable:ze,dateStr:Je})}const Ee=42-me.length;for(let Y=1;Y<=Ee;Y++){const G=new Date(i,s+1,Y);me.push({date:G,isCurrentMonth:!1,isAvailable:!1,dateStr:tt(G)})}return me});function _(){n(B,new Date(e(B).getFullYear(),e(B).getMonth()-1,1),!0),P()}function k(){n(B,new Date(e(B).getFullYear(),e(B).getMonth()+1,1),!0),P()}async function P(){n(J,!0);try{const i=e(B).getFullYear(),s=e(B).getMonth()+1,N=`${i}-${String(s).padStart(2,"0")}`,Z=await fetch(`/api/availability/month?event=${a.data.slug}&month=${N}`);if(!Z.ok)throw new Error("Failed to fetch availability");const ue=await Z.json();n(w,new Set(ue.availableDates||[]),!0)}catch(i){console.error("Error fetching month availability:",i),n(w,new Set,!0)}finally{n(J,!1)}}rt(()=>{P()});async function X(i){n(x,i,!0),n(f,null),n(F,!1),n(y,!0),n(A,"times");try{const s=await fetch(`/api/availability?event=${a.data.slug}&date=${i}`);if(!s.ok)throw new Error("Failed to fetch availability");const N=await s.json();n(M,N.slots||[],!0)}catch(s){console.error("Error fetching availability:",s),n(M,[],!0)}finally{n(y,!1)}}function ye(i){n(f,i,!0)}function Ce(){n(F,!0),n(A,"form")}function je(){e(A)==="form"?(n(A,"times"),n(F,!1)):e(A)==="times"&&(n(A,"calendar"),n(x,null),n(f,null),n(M,[],!0))}async function Be(i){i.preventDefault(),n(p,"submitting"),n(z,"");try{const s=await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventSlug:a.data.slug,startTime:e(f)?.start,endTime:e(f)?.end,attendeeName:e(m).name,attendeeEmail:e(m).email,notes:e(m).notes,timezone:e(V)})});if(!s.ok){const Z=await s.json();throw new Error(Z.message||"Failed to create booking")}const N=await s.json();n(U,N.meetingUrl||null,!0),n(te,N.meetingType||"google_meet",!0),n(p,"success")}catch(s){console.error("Booking error:",s),n(z,s.message||"Failed to create booking",!0),n(p,"error")}}const Ge=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];var pe=Hr();Xt("jot9ci",i=>{var s=mr();b(N=>he(s,"href",`data:image/svg+xml,${N??""}`),[()=>encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><defs><linearGradient id='grad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' style='stop-color:${T};stop-opacity:1'/><stop offset='100%' style='stop-color:${h.darkHex};stop-opacity:1'/></linearGradient></defs><circle cx='16' cy='16' r='15' fill='url(%23grad)'/><rect x='7' y='9' width='18' height='15' rx='2' fill='white' opacity='0.95'/><rect x='7' y='9' width='18' height='5' rx='2' fill='white'/><rect x='7' y='12' width='18' height='2' fill='${T}'/><rect x='10' y='6' width='2.5' height='5' rx='1' fill='white'/><rect x='19.5' y='6' width='2.5' height='5' rx='1' fill='white'/><circle cx='16' cy='18' r='4' fill='none' stroke='${h.darkHex}' stroke-width='1.5'/><line x1='16' y1='18' x2='16' y2='16' stroke='${h.darkHex}' stroke-width='1.5' stroke-linecap='round'/><line x1='16' y1='18' x2='18' y2='18' stroke='${h.darkHex}' stroke-width='1.5' stroke-linecap='round'/></svg>`)]),b(()=>{qt.title=(a.data.eventType?.name||"Book a Meeting")??""},void 0,void 0,void 0,!0),l(i,s)});var qe=r(pe);{var wt=i=>{var s=gr(),N=_e(s);{let ue=we(()=>a.data.eventType?.name||"Meeting");nr(N,{get eventName(){return e(ue)},get selectedDate(){return e(x)},get selectedSlot(){return e(f)},get meetingUrl(){return e(U)},get meetingType(){return e(te)},get brandColor(){return T},formatTimeRange:De,get formatSelectedDate(){return at}})}var Z=o(N,2);et(Z,{class:"mt-6"}),l(i,s)},kt=i=>{var s=Ar(),N=_e(s),Z=r(N);{var ue=v=>{var g=fr(),j=_e(g),K=r(j);t(j),Ne(2),b(()=>he(K,"src",a.data.eventType.cover_image)),l(v,g)};D(Z,v=>{a.data.eventType?.cover_image&&v(ue)})}var me=o(Z,2);{var Te=v=>{var g=br(),j=r(g);j.__click=je,t(g),l(v,g)};D(me,v=>{e(A)!=="calendar"&&v(Te)})}var Ee=o(me,2);{var Y=v=>{var g=kr(),j=_e(g),K=r(j);{var re=E=>{var c=hr();b(()=>{he(c,"src",a.data.user.profileImage),he(c,"alt",a.data.user.name)}),l(E,c)},ae=E=>{var c=xr(),W=r(c,!0);t(c),b(se=>u(W,se),[()=>a.data.user?.name?.charAt(0)||"M"]),l(E,c)};D(K,E=>{a.data.user?.profileImage?E(re):E(ae,!1)})}var Q=o(K,2),L=r(Q,!0);t(Q),t(j);var q=o(j,2),oe=r(q),ge=r(oe,!0);t(oe),t(q);var $=o(q,2),S=r($),R=r(S),fe=o(r(R),2),O=r(fe);t(fe),t(R);var ee=o(R,2),ne=o(r(ee),2),be=r(ne,!0);t(ne),t(ee);var Me=o(ee,2),ie=o(r(Me),2);ie.__click=()=>n(I,!e(I));var Ae=r(ie),We=r(Ae,!0);t(Ae),Ne(2),t(ie),t(Me),t(S);var Et=o(S,2);{var zt=E=>{var c=_r(),W=r(c);ht(W,{get selectedTimezone(){return e(V)},onSelect:se=>n(V,se,!0),onClose:()=>n(I,!1),get brandColor(){return T}}),t(c),l(E,c)};D(Et,E=>{e(I)&&E(zt)})}t($);var st=o($,2);{var Ft=E=>{var c=yr(),W=r(c);pt(W,()=>e(C)),t(c),l(E,c)};D(st,E=>{a.data.eventType?.description&&E(Ft)})}var lt=o(st,4),Xe=o(r(lt),2),dt=r(Xe);dt.__click=_;var Ze=o(dt,2),At=r(Ze,!0);t(Ze);var Ht=o(Ze,2);Ht.__click=k,t(Xe);var Ke=o(Xe,2);Qe(Ke,21,()=>Ge,$e,(E,c)=>{var W=pr(),se=r(W,!0);t(W),b(()=>u(se,e(c))),l(E,W)}),t(Ke);var vt=o(Ke,2);Qe(vt,21,()=>e(Ye)(),$e,(E,c)=>{const W=we(()=>e(w).has(e(c).dateStr)),se=we(()=>e(c).isAvailable&&e(W)),He=we(()=>e(x)===e(c).dateStr);var xe=wr();xe.__click=()=>e(se)&&X(e(c).dateStr);var Vt=r(xe,!0);t(xe),b(Nt=>{xe.disabled=!e(se),ft(xe,1,`aspect-square flex items-center justify-center text-sm rounded-full transition
									${e(c).isCurrentMonth?"":"text-gray-300"}
									${e(se)&&!e(He)?"font-semibold":""}
									${e(c).isAvailable&&!e(W)&&e(c).isCurrentMonth?"text-gray-400":""}
									${!e(c).isAvailable&&e(c).isCurrentMonth?"text-gray-300":""}
									${e(He)?"text-white":""}`),le(xe,`${e(se)&&!e(He)?"background-color: var(--brand-lighter); color: var(--brand-dark)":""}${e(He)?"background-color: var(--brand-color)":""}`),u(Vt,Nt)},[()=>e(c).date.getDate()]),l(E,xe)}),t(vt),t(lt),b((E,c)=>{u(L,a.data.user?.name||"Host"),u(ge,a.data.eventType?.name||"Meeting"),u(O,`${a.data.eventType?.duration??""} min`),u(be,a.data.eventType?.invite_calendar==="outlook"?"Microsoft Teams":"Google Meet"),u(We,E),u(At,c)},[()=>bt(e(V),ve),()=>Ue(e(B))]),l(v,g)};D(Ee,v=>{e(A)==="calendar"&&v(Y)})}var G=o(Ee,2);{var Je=v=>{var g=jr(),j=o(r(g),2),K=r(j,!0);t(j);var re=o(j,2);{var ae=L=>{var q=Tr();l(L,q)},Q=L=>{var q=Jt(),oe=_e(q);{var ge=S=>{var R=Mr();l(S,R)},$=S=>{var R=Cr(),fe=_e(R);Qe(fe,21,()=>e(M),$e,(ne,be)=>{const Me=we(()=>e(f)===e(be));var ie=Sr();ie.__click=()=>ye(e(be));var Ae=r(ie,!0);t(ie),b(We=>{ft(ie,1,`py-3 px-4 border-2 rounded-lg text-sm font-semibold transition
										${e(Me)?"border-gray-900 bg-gray-900 text-white":""}`),le(ie,e(Me)?"":"border-color: var(--brand-color); color: var(--brand-color)"),u(Ae,We)},[()=>ce(e(be).start)]),l(ne,ie)}),t(fe);var O=o(fe,2);{var ee=ne=>{var be=Dr();be.__click=Ce,l(ne,be)};D(O,ne=>{e(f)&&ne(ee)})}l(S,R)};D(oe,S=>{e(M).length===0?S(ge):S($,!1)},!0)}l(L,q)};D(re,L=>{e(y)?L(ae):L(Q,!1)})}t(g),b(L=>u(K,L),[()=>e(x)?at(e(x)):""]),l(v,g)};D(G,v=>{e(A)==="times"&&v(Je)})}var ze=o(G,2);{var Tt=v=>{var g=Er(),j=r(g);{var K=O=>{var ee=Br(),ne=r(ee,!0);t(ee),b(()=>u(ne,e(z))),l(O,ee)};D(j,O=>{e(z)&&O(K)})}var re=o(j,4),ae=r(re);t(re);var Q=o(re,2),L=r(Q),q=o(r(L),2);Le(q),t(L);var oe=o(L,2),ge=o(r(oe),2);Le(ge),t(oe);var $=o(oe,2),S=o(r($),2);_t(S),t($);var R=o($,2),fe=r(R,!0);t(R),t(Q),t(g),b((O,ee)=>{u(ae,`${O??""}${ee??""}`),R.disabled=e(p)==="submitting",u(fe,e(p)==="submitting"?"Scheduling...":"Schedule Event")},[()=>e(x)?Re(e(x)):"",()=>e(f)?` at ${ce(e(f).start)}`:""]),Ie("submit",Q,Be),ke(q,()=>e(m).name,O=>e(m).name=O),ke(ge,()=>e(m).email,O=>e(m).email=O),ke(S,()=>e(m).notes,O=>e(m).notes=O),l(v,g)};D(ze,v=>{e(A)==="form"&&v(Tt)})}var Mt=o(ze,2);et(Mt,{class:"px-6 pb-8"}),t(N);var Fe=o(N,2),ot=r(Fe);ur(ot,{get user(){return a.data.user},get eventType(){return a.data.eventType},get selectedDate(){return e(x)},get selectedSlot(){return e(f)},get brandColor(){return T},formatTime:ce});var nt=o(ot,2),it=r(nt);{var St=v=>{var g=zr(),j=r(g,!0);t(g),b(()=>u(j,e(z))),l(v,g)};D(it,v=>{e(z)&&v(St)})}var Dt=o(it,2);{var Ct=v=>{rr(v,{get bookingStatus(){return e(p)},get bookingError(){return e(z)},get brandColor(){return T},get brandDark(){return h.dark},onSubmit:Be,get bookingForm(){return e(m)},set bookingForm(g){n(m,g,!0)}})},jt=v=>{var g=Fr(),j=r(g),K=o(r(j),2);Qt(K,{get currentMonth(){return e(B)},get selectedDate(){return e(x)},get availableDates(){return e(w)},get brandColor(){return T},get brandLighter(){return h.lighter},get brandDark(){return h.dark},onDateSelect:X,onPrevMonth:_,onNextMonth:k});var re=o(K,2),ae=o(r(re),2);ae.__click=()=>n(I,!e(I));var Q=o(r(ae),2),L=r(Q,!0);t(Q),Ne(2),t(ae);var q=o(ae,2);{var oe=S=>{ht(S,{get selectedTimezone(){return e(V)},onSelect:R=>n(V,R,!0),onClose:()=>n(I,!1),get brandColor(){return T}})};D(q,S=>{e(I)&&S(oe)})}t(re),t(j);var ge=o(j,2);{var $=S=>{$t(S,{get selectedDate(){return e(x)},get availableSlots(){return e(M)},get selectedSlot(){return e(f)},get loading(){return e(y)},get brandColor(){return T},formatTime:ce,onSelectSlot:ye,onConfirm:Ce})};D(ge,S=>{e(x)&&S($)})}t(g),b(S=>u(L,S),[()=>bt(e(V),ve)]),l(v,g)};D(Dt,v=>{e(F)?v(Ct):v(jt,!1)})}t(nt),t(Fe);var Bt=o(Fe,2);et(Bt,{class:"mt-6"}),b(()=>le(Fe,`width: ${e(F)?"700px":e(x)?"920px":"650px"}`)),l(i,s)};D(qe,i=>{e(p)==="success"?i(wt):i(kt,!1)})}t(pe),b(()=>le(pe,`--brand-color: ${T??""}; --brand-light: ${h.light??""}; --brand-lighter: ${h.lighter??""}; --brand-dark: ${h.dark??""}; --brand-rgb: ${h.rgb.r??""}, ${h.rgb.g??""}, ${h.rgb.b??""};`)),l(de,pe),Pe()}Wt(["click"]);export{Kr as component};
